# API V1

## Overview

#### Introduction

The Sipcentric API, based around REST, allows users to interact with core features and information on the Sipcentric platform. 

#### Authentication

Authentication to the the Sipcentric API occurs via HTTP Basic Auth. Users must authenticate at one of three levels using a username and password combination provided from the Sipcentric Portal. The three levels of authentication are:

- Extension User
- Company Admin
- Reseller

Company Admin and Reseller accounts are both able to access all resources on all accounts that they have access to you. Extension users access is detailed below:

| Resource          | Access                                    |  
| --------          | ------                                    |  
| customers         | GET own                                   |  
| recordings        | None                                      |  
| phoneBook         | Full access                               |  
| timeIntervals     | GET all                                   |  
| endpoints         | GET own                                   |  
| phoneNumbers      | GET all                                   |  
| sms               | Send sms                                  |  
| creditStatus      | None                                      |  
| calls             | POST to originate call from own extension |  
| sounds            | GET                                       |  
| outgoingCallerIds | GET all                                   |  

Authentication is currently required for all resources, and all API requests should be made over HTTPS, rather than over HTTP.

#### Request Format

Query strings have several common parameters that can be used with any resource. Query string parameters are added by appending them to the query URI with a question mark `?`, subsequent query parameters are then added using an ampersand `&` as in the example below.

```
https://pbx.sipcentric.com/api/v1/customers/me/sms?pageSize=2&page=1
```

| Common Query Parameters | Type    | Description                                       |  
| ----------------------- | ----    | -----------                                       |  
| `pageSize`              | Integer | The number of items to include per page (max 200) |  
| `page`                  | Integer | The page number to return                         |  


#### Response Format

All responses will include a HTTP status code in the response. Some of the most common status codes that requests may return, and their definitions, are listed below.

| HTTP Status Codes          | Type         | Description                                    |  
| -----------------          | ----         | -----------                                    |  
| `200`                      | Ok           | Everything is awesome                          |  
| `201`                      | Created      | Resource created successfully                  |  
| `400`                      | Bad Request  | Check your request, possible missing parameter |  
| `401`                      | Unauthorized | Authentication failed, check credentials       |  
| `404`                      | Not Found    | The requested item doesn't exist               |  
| `500`, `502`, `503`, `504` | Server Error | The server has responded with an error         |  


#### Resources Structure

(pagination, navigation)

#### Object Formatting

(dates, numbers)

## Resources

### /customers

#### List customers

The root resource located at https://pbx.sipcentric.com/api/v1/customers lists all customers that the user has access to on the account. When authenticated as an extension user, or a company admin, this will only return their own customer account, however when authenticated as a reseller all customer accounts that that reseller has access to will be returned.

`GET /customers`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers?pageSize=1&page=1
```


```response
HTTP/1.1 200 OK

{
  "totalItems": 1,
  "pageSize": 1,
  "page": 1,
  "items": [
    {
      "type": "customer",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25",
      "created" : "2014-03-10T13:37:00.000+0000",
      "company": "Bloggs co",
      "firstName": "Fred",
      "lastName": "Bloggs",
      "telephone": "07557000000",
      "email": "contact@fredbloggs.com",
      "address1": "60 Cleveland St",
      "address2": "Fitzrovia",
      "city": "London",
      "postcode": "W1T 4JZ"
    }
  ]
}
```


### /customers/me




#### Get customer

Returns a single customer given the customer ID, providing the user is authenticated to allow access to that customer. The special customer ID of `me` can also be used to return only the customer account that you are authenticated to.

`GET /customers/{customerId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25
```


```response
HTTP/1.1 200 OK

{
  "type": "customer",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25",
  "created" : "2014-03-10T13:37:00.000+0000",
  "company": "Bloggs co",
  "firstName": "Fred",
  "lastName": "Bloggs",
  "telephone": "07557000000",
  "email": "contact@fredbloggs.com",
  "address1": "60 Cleveland St",
  "address2": "Fitzrovia",
  "city": "London",
  "postcode": "W1T 4JZ",
  "links": {
    "callBundles" : "https://pbx.sipcentric.com/api/v1/customers/me/callbundles",
    "recordings": "https://pbx.sipcentric.com/api/v1/customers/me/recordings",
    "phoneBook": "https://pbx.sipcentric.com/api/v1/customers/me/phonebook",
    "timeIntervals": "https://pbx.sipcentric.com/api/v1/customers/me/timeintervals",
    "endpoints": "https://pbx.sipcentric.com/api/v1/customers/me/endpoints",
    "phoneNumbers": "https://pbx.sipcentric.com/api/v1/customers/me/phonenumbers",
    "sms": "https://pbx.sipcentric.com/api/v1/customers/me/sms",
    "creditStatus": "https://pbx.sipcentric.com/api/v1/customers/me/creditstatus",
    "calls": "https://pbx.sipcentric.com/api/v1/customers/me/calls",
    "sounds": "https://pbx.sipcentric.com/api/v1/customers/me/sounds",
    "outgoingCallerIds": "https://pbx.sipcentric.com/api/v1/customers/me/outgoingcallerids"
  }
}
```


### /customers/me/phonebook

A really cool Sipcentric feature is the phone book!

| Resource Information           |                                   |  
| --------------------           | ---                               |  
| Rate Limited?                  | Yes                               |  
| Requests per rate limit window | 1200/hour                         |  
| Authentication                 | Basic Auth                        |  
| Response Formats               | json                              |  
| HTTP Methods                   | GET, POST, DELETE, PUT            |  
| Response Object                | [phonebookentry](#phonebookentry) |  

#### List phone book entries

`GET /phonebook`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/phonebook?pageSize=2&page=1
```


```response
HTTP/1.1 200 OK

{
  "totalItems" : 18,
  "pageSize" : 2,
  "page" : 1,
  "items" : [ 
    {
      "type" : "phonebookentry",
      "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/phonebook/716",
      "created" : "2014-03-10T13:37:00.000+0000",
      "name" : "Fred Mobile",
      "phoneNumber" : "07902000000",
      "speedDial" : 3
    }, {
      "type" : "phonebookentry",
      "uri" : "https://pbx.sipcentric.com/api/v1/customers/5/phonebook/773",
      "created" : "2014-03-10T13:38:00.000+0000",
      "name" : "Sipcentric",
      "phoneNumber" : "01212854400"
    }
  ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/me/phonebook?pageSize=2&page=2"
}
```


#### Read phone book entry

`GET /phonebook/{id}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/phonebook/773
```


```response
HTTP/1.1 200 OK

{
  "type" : "phonebookentry",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/5/phonebook/773",
  "created" : "2014-03-10T13:38:00.000+0000",
  "name" : "Sipcentric",
  "phoneNumber" : "01212854400"
}

```


#### Create phone book entry

`POST /phonebook`

| JSON Parameters | Type    | Description              |  
| --------------- | ----    | -----------              |  
| `type`          | String  | phonebookentry.          |  
| `name`          | String  | Name of contact.         |  
| `phoneNumber`   | String  | Phone number for entry.  |  
| `speedDial`     | Integer | Optional speed dial key. |  


#### Delete phone book entry

`DELETE /phonebook/{id}`

```
DELETE https://pbx.sipcentric.com/api/v1/customers/me/phonebook/706
```

### /customers/me/sms

Short Message Service (SMS) is a text messaging service. You can send and receive SMS messages on our platform.

| Resource Information           |                           |  
| --------------------           | ---                       |  
| Rate Limited?                  | Yes                       |  
| Requests per rate limit window | 1200/hour                 |  
| Authentication                 | Basic Auth                |  
| Response Formats               | json                      |  
| HTTP Methods                   | GET, POST                 |  
| Response Object                | [smsmessage](#smsmessage) |  


#### List SMS messages

`GET /sms`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/sms?pageSize=2&page=1
```

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "totalItems": 188,
  "pageSize": 2,
  "page": 1,
  "items":  [
     {
      "type": "smsmessage",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/me/sms/253368",
      "created" : "2014-03-10T13:37:00.000+0000",
      "direction": "out",
      "from": "01212854400",
      "to": "07902000000",
      "body": "Hey, this API is awesome!",
      "sendStatus": "sent",
      "deliveryStatus": 1,
      "cost": 0.1
    }, {
      "type": "smsmessage",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/me/sms/253369",
      "created" : "2014-03-10T13:38:00.000+0000",
      "direction": "in",
      "from": "07902000000",
      "to": "01212854400",
      "body": "I know, it's great!",
      "cost": 0.0
    } ],
  "nextPage": "https://pbx.sipcentric.com/api/v1/customers/me/sms?pageSize=2&page=2"
}
```
 -->
#### Get SMS Message

`GET /sms/{smsId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/sms/253368
```

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "type" : "smsmessage",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/me/sms/253368",
  "created" : "2014-03-10T13:37:00.0000+0000",
  "direction" : "out",
  "from" : "07557000000",
  "to" : "07902000000",
  "body" : "Hey, this API is awesome!",
  "sendStatus" : "sent",
  "deliveryStatus" : 1,
  "cost" : 0.100
}
```
 -->
Will retrieve a single SMS message.

#### Send SMS

`POST /sms`

| Parameters | Type   | Description                   |  
| ---------- | ----   | -----------                   |  
| `type`     | String | smsmessage.                   |  
| `to`       | String | Number to send message to.    |  
| `from`     | String | Name to display message from. |  
| `body`     | String | Message body.                 |  

Example request:

```
POST https://pbx.sipcentric.com/api/v1/customers/me/sms

{
  "type": "smsmessage",
  "to": "07902000000",
  "from": "07557000000",
  "body": "Hey, this API is awesome!"
}
```

<!-- Example response:

```
HTTP/1.1 201 Created

{
  "type": "smsmessage",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/me/sms/253368",
  "direction": "out",
  "from": "07557000000",
  "to": "07902000000",
  "body": "Hey, this API is awesome!",
  "sendStatus": "sent",
  "deliveryStatus": 0,
  "cost": 0.1
}
```
 -->

### /customers/me/calls

List and make phone calls.

| Resource Information           |               |  
| --------------------           | ---           |  
| Rate Limited?                  | Yes           |  
| Requests per rate limit window | 1200/hour     |  
| Authentication                 | Basic Auth    |  
| Response Formats               | json          |  
| HTTP Methods                   | GET, POST     |  
| Response Object                | [call](#call) |  

#### Originate call

`POST /calls`

| JSON Parameters | Type   | Description                   |  
| --------------- | ----   | -----------                   |  
| `type`          | String | call                          |  
| `endpoint`      | String | Number to originate call from |  
| `to`            | String | Number to call                |  

Example request:

```
POST https://pbx.sipcentric.com/api/v1/customers/me/calls

{
  "type": "call",
  "endpoint": "https://pbx.sipcentric.com/api/v1/customers/me/endpoints/1234",
  "to": "07902000000"
}
```

<!-- Example response:

```
HTTP/1.1 200 OK
```
 -->
#### Get call history

`GET /calls`

| Query String Parameters | Type | Description |
| ----------------------- | ---- | ----------- |
| `createdAfter` | String | Include only records created after the specified date/time (inclusive) |
| `createdBefore` | String | Include only records created before the specified date/time (inclusive) |
| `startedAfter` | String | Include only records started after the specified date/time (inclusive) |
| `startedBefore` | String | Include only records started before the specified date/time (inclusive) |
| `from` | String | Include only calls from a specific number. Currently supports exact match only (no wildcards) |
| `to` | String | Include only calls to a specific number. Currently supports exact match only (no wildcards) |
| `direction` | String | Include only calls in a specific direction (in/out)
| `includeLocal` | String | Whether or not to include local calls. Note: only the outbound record is included for local calls, as the inbound record would be an exact replica (true/false) |


Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/calls?pageSize=2&page=1
```

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "totalItems": 23686,
  "pageSize": 1,
  "page": 1,
  "items": [
    {
      "type": "call",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/me/calls/7592317",
      "created" : "2014-03-10T13:37:00.000+0000",
      "callType": "domain",
      "direction": "IN",
      "from": "07557000000",
      "to": "07902000000",
      "callStarted": "2014-03-10T13:37:00.000+0000",
      "outcome": "no-answer",
      "duration": 0,
      "cost": 0,
      "callId": "ast01-1400142051.1562723",
      "linkedId": "ast01-1400142051.1562723",
      "links": {
        "recordings": "https://pbx.sipcentric.com/api/v1/customers/me/recordings?linkedId=ast01-1400142051.1562723"
      }
    }, {
      "type": "call",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/me/calls/7592432",
      "created" : "2014-03-10T13:47:00.000+0000",
      "callType": "domain",
      "direction": "OUT",
      "from": "07902000000",
      "to": "07557000000",
      "callStarted": "2014-03-10T13:47:00.000+0000",
      "outcome": "answered",
      "duration": 60,
      "cost": 0.09,
      "callId": "ast01-1401721105.2847099",
      "linkedId": "ast01-1401721105.2847099",
      "links": {
        "recordings": "https://pbx.sipcentric.com/api/v1/customers/me/recordings?linkedId=ast01-1401721105.2847099"
      }
    } ],
  "nextPage": "https://pbx.sipcentric.com/api/v1/customers/me/calls?pageSize=2&page=2"
}
```
 -->
Will retrieve a single call.

### /customers/me/sounds

| Resource Information           |                                    |  
| --------------------           | ---                                |  
| Rate Limited?                  | Yes                                |  
| Requests per rate limit window | 1200/hour                          |  
| Authentication                 | Basic Auth                         |  
| Response Formats               | json                               |  
| HTTP Methods                   | GET, POST, DELETE, PUT             |  
| Response Object                | [music](#music), [prompt](#prompt) |  

#### List sounds

`GET /sounds`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `type` | String | Include only a specific type of sound file (prompt/music) |

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/sounds?pageSize=2&page=1
```

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "totalItems" : 6,
  "pageSize" : 1,
  "page" : 1,
  "items" : [ {
    "type" : "prompt",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/me/sounds/1035",
    "created" : "2014-03-10T13:37:00.0000+0000",
    "name" : "thank-you-for-calling",
    "size" : 129612
  }, {
    "type" : "prompt",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/5/sounds/1046",
    "created" : "2014-03-10T13:37:00.0000+0000",
    "name" : "calls-may-be-recorded",
    "size" : 69426
  } ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/me/sounds?pageSize=2&page=2"
}
```
 -->
#### Get sound

`GET /sounds/{soundId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/sounds/1035
```

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "type" : "prompt",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/me/sounds/1035",
  "created" : "2014-03-10T13:37:00.0000+0000",
  "name" : "thank-you-for-calling",
  "size" : 129612
}
```
 -->
### /customers/me/recordings

Fetch call recordings

| Resource Information           |                         |  
| --------------------           | ---                     |  
| Rate Limited?                  | Yes                     |  
| Requests per rate limit window | 1200/hour               |  
| Authentication                 | Basic Auth              |  
| Response Formats               | json                    |  
| HTTP Methods                   | GET, DELETE             |  
| Response Object                | [recording](#recording) |  

#### List recordings

`GET /recordings`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `createdAfter` | String | Include only records created after the specified date/time (inclusive) |
| `createdBefore` | String | Include only records created before the specified date/time (inclusive) |
| `startedAfter` | String | Include only records started after the specified date/time (inclusive) |
| `startedBefore` | String | Include only records started before the specified date/time (inclusive) |
| `callId` | String | Include only recordings relating to a specific call ID |
| `linkedId` | String | Include only recordings relating to calls with the same linked ID |
| `direction` | String | Include only calls in a specific direction (in/out)
| `includeLocal` | String | Whether or not to include local calls. Note: only the outbound record is included for local calls, as the inbound record would be an exact replica (true/false) |

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/recordings?pageSize=2&page=1
```

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "totalItems" : 5788,
  "pageSize" : 2,
  "page" : 1,
  "items" : [ 
    {
      "type" : "recording",
      "uri" : "https://pbx.sipcentric.com/api/v1/customers/me/recordings/1358371",
      "created" : "2014-03-10T13:42:00.0000+0000",
      "direction" : "IN",
      "partyId" : "106",
      "started" : "2014-03-10T13:37:00.0000+0000",
      "size" : 9615,
      "callId" : "ast01-1400082083.1542464",
      "linkedId" : "ast01-1400082083.1542464",
      "endpoint" : "https://pbx.sipcentric.com/api/v1/customers/me/endpoints/2535"
    }, {
      "type" : "recording",
      "uri" : "https://pbx.sipcentric.com/api/v1/customers/me/recordings/1358372",
      "created" : "2014-03-10T14:09:00.0000+0000",
      "direction" : "OUT",
      "partyId" : "07557000000",
      "started" : "2014-03-10T14:07:00.0000+0000",
      "size" : 97365,
      "callId" : "ast01-1401721105.2847099",
      "linkedId" : "ast01-1401721105.2847099",
      "endpoint" : "https://pbx.sipcentric.com/api/v1/customers/me/endpoints/1928"
    } ,
  ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/me/recordings?pageSize=2&page=2"
}
```
 -->

#### Get recording

`GET /recordings`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/recordings/{recordingId}
```

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "type": "recording",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/me/recordings/1358371",
  "created" : "2014-03-10T13:37:00.000+0000",
  "direction": "IN",
  "partyId": "106",
  "started": "2014-05-14T15:41:25.000+0000",
  "size": 9615,
  "callId": "ast01-1400082083.1542464",
  "linkedId": "ast01-1400082083.1542464",
  "endpoint": "https://pbx.sipcentric.com/api/v1/customers/me/endpoints/2535"
}
```
 -->
### /customers/me/timeintervals

View time intervals on your account.

| Resource Information           |                           |  
| --------------------           | ---                       |  
| Rate Limited?                  | Yes                       |  
| Requests per rate limit window | 1200/hour                 |  
| Authentication                 | Basic Auth                |  
| Response Formats               | json                      |  
| HTTP Methods                   | GET, POST, DELETE, PUT    |  
| Response Object                | [timeinterval](#timeinterval) |

#### List time intervals

`GET /timeintervals`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/timeintervals?pageSize=2&page=1
```

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "totalItems" : 25,
  "pageSize" : 2,
  "page" : 1,
  "items" : [ {
    "type" : "timeinterval",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/me/timeintervals/31",
    "created" : "2014-03-10T13:37:00.000+0000",
    "name" : "Christmas",
    "repeat" : "YEARLY",
    "data" : [ {
      "startTime" : "00:00",
      "endTime" : "23:59",
      "includeDays" : "MON-SUN",
      "dayOfMonth" : 25,
      "month" : "DEC"
    } ]
  }, {
    "type" : "timeinterval",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/me/timeintervals/32",
    "created" : "2014-03-10T13:37:00.000+0000",
    "name" : "Support Out of Hours",
    "repeat" : "WEEKLY",
    "data" : [ {
      "startTime" : "17:00",
      "endTime" : "23:59",
      "includeDays" : "MON-FRI"
    }, {
      "startTime" : "00:00",
      "endTime" : "23:59",
      "includeDays" : "SAT-SUN"
    }, {
      "startTime" : "00:00",
      "endTime" : "07:59",
      "includeDays" : "MON-FRI"
    } ]
  } ]
}
```
 -->
#### Get time interval

`GET /timeintervals/{timeIntervalId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/timeintervals/31
```

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "type": "timeinterval",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/me/timeintervals/31",
  "created" : "2014-03-10T13:37:00.000+0000",
  "name": "Always",
  "repeat": "WEEKLY",
  "data":  [
     {
      "startTime": "00:00",
      "endTime": "23:59",
      "includeDays": "MON-SUN"
    }
  ]
}
```
 -->

### /customers/me/endpoints

View endpoints on your account.

| Resource Information           |                                                                                                          |  
| --------------------           | ---                                                                                                      |  
| Rate Limited?                  | Yes                                                                                                      |  
| Requests per rate limit window | 1200/hour                                                                                                |  
| Authentication                 | Basic Auth                                                                                               |  
| Response Formats               | json                                                                                                     |  
| HTTP Methods                   | GET, POST, DELETE, PUT                                                                                   |  
| Response Object                | [phone](#phone), [virtual](#virtual), [ivr](#ivr), [queue](#queue), [group](#group), [mailbox](#mailbox) |  

#### List endpoints

`GET /endpoints`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/endpoints?pageSize=2&page=1
```

| Response Properties | Type | Description |
| ------------------- | ---- | ----------- |
| `created` | String | Time that the resource was created in ISO8601 format |
| `shortNumber` | String | 3 digit short number identifier for endpoint |
| `name` | String | Endpoint name |
| `timeout` | Integer | Endpoint ring timeout |

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "totalItems": 25,
  "pageSize": 1,
  "page": 1,
  "items":  [
     {
      "type": "ivr",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/me/endpoints/101",
      "created" : "2014-03-10T13:37:00.000+0000",
      "shortNumber": "001",
      "name": "Main IVR",
      "timeout": 4
    },
    {
      "type": "ivr",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/me/endpoints/102",
      "created" : "2014-03-10T13:37:00.000+0000",
      "shortNumber": "002",
      "name": "Out of Hours IVR",
      "timeout": 4
    }
  ],
  "nextPage": "https://pbx.sipcentric.com/api/v1/customers/me/endpoints?pageSize=1&page=2"
}
```
 -->
#### Get endpoint

`GET /endpoint/{endpointID}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/endpoints/101
```

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "type": "ivr",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/me/endpoints/101",
  "created" : "2014-03-10T13:37:00.000+0000",
  "shortNumber": "001",
  "name": "Main IVR",
  "timeout": 0
}
```
 -->
### /customers/me/phonenumbers

View phone numbers on your account.

| Resource Information           |                        |  
| --------------------           | ---                    |  
| Rate Limited?                  | Yes                    |  
| Requests per rate limit window | 1200/hour              |  
| Authentication                 | Basic Auth             |  
| Response Formats               | json                   |  
| HTTP Methods                   | GET, POST, DELETE, PUT |  
| Response Object                | [phonebookentry](#phonebookentry)    |  


#### List phone numbers

`GET /phonenumbers`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/phonenumbers?pageSize=2&page=1
```

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "totalItems" : 15,
  "pageSize" : 2,
  "page" : 1,
  "items" : [ {
    "type" : "did",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/me/phonenumbers/47",
    "created" : "2014-03-10T13:37:00.000+0000",
    "number" : "07557000000",
    "identifier" : "DID",
    "smsEnabled" : true,
    "smsAllowIncoming" : true,
    "smsNotificationEmail" : "contact@fredbloggs.com",
    "smsNotificationUrl" : "https://www.fredbloggs.com",
    "faxEnabled" : false
  }, {
    "type" : "did",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/me/phonenumbers/50",
    "created" : "2014-03-10T13:37:00.000+0000",
    "number" : "01212854400",
    "identifier" : "",
    "destination" : "https://pbx.sipcentric.com/api/v1/customers/5/endpoints/101",
    "smsEnabled" : true,
    "smsAllowIncoming" : true,
    "smsNotificationEmail" : "support@sipcentric.com",
    "faxEnabled" : false,
    "routingRules" : [ {
      "timeInterval" : "https://pbx.sipcentric.com/api/v1/customers/5/timeintervals/594",
      "destination" : "https://pbx.sipcentric.com/api/v1/customers/5/endpoints/102"
    }, {
      "timeInterval" : "https://pbx.sipcentric.com/api/v1/customers/5/timeintervals/625",
      "destination" : "https://pbx.sipcentric.com/api/v1/customers/5/endpoints/102"
    }, {
      "timeInterval" : "https://pbx.sipcentric.com/api/v1/customers/5/timeintervals/704",
      "destination" : "https://pbx.sipcentric.com/api/v1/customers/5/endpoints/102"
    } ]
  } ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/me/phonenumbers?pageSize=2&page=2"
}
```
 -->
#### Get phone number

`GET /phonenumbers/{numberId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/phonenumbers/47
```

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "type": "did",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/me/phonenumbers/47",
  "created" : "2014-03-10T13:37:00.000+0000",
  "number": "01212854747",
  "identifier": "DID",
  "destination": "https://pbx.sipcentric.com/api/v1/customers/me/endpoints/94",
  "smsEnabled": true
}
```
 -->
### /customers/me/outgoingcallerids

View outgoing caller ids on your account.

| Resource Information           |                                       |  
| --------------------           | ---                                   |  
| Rate Limited?                  | Yes                                   |  
| Requests per rate limit window | 1200/hour                             |  
| Authentication                 | Basic Auth                            |  
| Response Formats               | json                                  |  
| HTTP Methods                   | GET, POST, DELETE, PUT                |  
| Response Object                | [outgoingcallerid](#outgoingcallerid) |  

#### List outgoing caller ids

`GET /outgoingcallerids`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/outgoingcallerids?pageSize=2&page=1
```

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "totalItems": 1,
  "pageSize": 1,
  "page": 1,
  "items":  [
     {
      "type": "outgoingcallerid",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/me/outgoingcallerids/114",
      "created" : "2014-03-10T13:37:00.000+0000",
      "number": "Sipcentric",
      "allowCalls": false,
      "allowSms": true
    },
    {
      "type": "outgoingcallerid",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/me/outgoingcallerids/115",
      "created" : "2014-03-10T13:37:00.000+0000",
      "number": "01212854400",
      "allowCalls": false,
      "allowSms": true
    }
  ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/me/outgoingcallerid?pageSize=2&page=2"
}
```
 -->
#### Get outgoing caller id

`GET /outgoingcallerid/{numberId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/outgoingcallerid/115
```

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "type": "outgoingcallerid",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/me/outgoingcallerids/115",
  "created" : "2014-03-10T13:37:00.000+0000",
  "number": "01212854400",
  "allowCalls": false,
  "allowSms": true
}
```
 -->

### /customers/me/creditstatus

View customers and remaining calling credit.

| Resource Information           |                               |  
| --------------------           | ---                           |  
| Rate Limited?                  | Yes                           |  
| Requests per rate limit window | 1200/hour                     |  
| Authentication                 | Basic Auth                    |  
| Response Formats               | json                          |  
| HTTP Methods                   | GET, POST, DELETE, PUT        |  
| Response Object                | [creditstatus](#creditstatus) |  

#### Get credit status

`GET /creditstatus`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/creditstatus
```

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "type": "creditstatus",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/me/creditstatus",
  "accountType": "postpaid",
  "creditRemaining": 191.571
}
```
 -->
### /customers/me/callbundles

View call bundles on your account.

| Resource Information           |                        |  
| --------------------           | ---                    |  
| Rate Limited?                  | Yes                    |  
| Requests per rate limit window | 1200/hour              |  
| Authentication                 | Basic Auth             |  
| Response Formats               | json                   |  
| HTTP Methods                   | GET, POST, DELETE, PUT |  
| Response Object                | [customerbundle](#customerbundle)    |  

#### List call bundles

`GET /callbundles`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/callbundles?pageSize=1&page=1
```

<!-- Example response:

```
HTTP/1.1 200 OK

{
  "totalItems": 20,
  "pageSize": 1,
  "page": 1,
  "items":  [
     {
      type: "customerbundle",
      uri: "https://pbx.sipcentric.com/api/v1/customers/me/callbundles/1040",
      created: "2014-03-01T00:00:00.000+0000",
      name: "1000 Mins - Local/National (Free)",
      inclusiveMins: 1000,
      priceMonthly: 5,
      validFrom: "2014-03-01T00:00:00.000+0000",
      validTo: "2014-03-31T23:59:59.999+0000",
      usedMins: 57,
      availableMins: 943,
      autoRenew: true,
      status: "ACTIVE"
    }
  ]
}
```
 -->
#### Get call bundle

`GET /callbundles/{numberId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/callbundles/1040
```


<!-- Example response:

```
HTTP/1.1 200 OK

{
  "type": "customerbundle",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/me/callbundles/1040",
  "created": "2014-03-01T00:00:00.000+0000",
  "name": "1000 Mins - Local/National (Free)",
  "inclusiveMins": 1000,
  "priceMonthly": 5,
  "validFrom": "2014-03-01T00:00:00.000+0000",
  "validTo": "2014-03-31T23:59:59.999+0000",
  "usedMins": 57,
  "availableMins": 943,
  "autoRenew": true,
  "status": "ACTIVE"
}
```
 -->


### /tokengenerator

In some situations it's not possible to use basic authentication in a GET request, such as downloading a call recording in a client's browser.

To solve this issue we have added a token generator for pre authenticating these requests. This will return a single-use token for accessing any readonly resources 
you would normally have to authenticate for.

#### Get token

```
GET https://pbx.sipcentric.com/api/v1/tokengenerator

{
  "type": "authtoken",
  "id": "318f9a6d-162e-4d46-89d2-3d7cb2f4db16",
  "created": "2014-07-11T15:11:12.477+0000",
  "expires": "2014-07-11T16:11:12.477+0000"
}
```

You can now use this token to get a call recording using the `tokenid` parameter in the GET request:

`https://pbx.sipcentric.com/api/v1/customers/me/recordings/242348.wav?tokenid=318f9a6d-162e-4d46-89d2-3d7cb2f4db16`

Anyone that tried to use the request again will get a 401 Unauthorized. This prevents replay attacks from getting any data.

### /stream

You can create a standing HTTP connection to our API for live streaming data. This means you can process events in near real time, without having to poll other resources and potentially hit request limits. Currently the following is available via the streaming API:

- Incoming call notifications
- Received SMS messages

Data is returned as JSON objects.

Example:

```
{}
```

## Response Objects

#### phonebookentry

The `phonebookentry` object represents entries in the shared company phonebook, each entry in which can be accessed using it's unique URI. Every entry is then assigned a name, a phone number, and an optional speed dial number (up to 4 digits).

| Representation  | Type    | Description                                             |  
| ------------  | ----    | -----------                                             |  
| `type`        | String  | Describes the type of resource                          |  
| `uri`         | String  | Unique URI for each resource                            |  
| `created`     | String  | Time that the resource was created in ISO8601 format    |  
| `name`        | String  | Name of phonebook entry                                 |  
| `phoneNumber` | String  | Phone number of phonebook entry                         |  
| `speedDial`   | Integer | Up to four digit speed-dial number for phonebook entry  |  

***

#### smsmessage

The `smsmessage` object represents a single SMS message, which can each be accessed using the unique URI provided. 

| Representation     | Type    | Description                                             |  
| ------------     | ----    | -----------                                             |  
| `type`           | String  | Describes the type of resource                          |  
| `uri`            | String  | Unique URI for each resource                            |  
| `created`        | String  | Time that the resource was created in ISO8601 format    |  
| `direction`      | String  | Direction of message (`in`/`out`)                       |  
| `from`           | String  | Name or phone number of sender                          |  
| `to`             | String  | Name or phone number of recipient                       |  
| `body`           | String  | Message body                                            |  
| `sendStatus`     | String  | Indicates message send status `pending`/`sent`/`failed` |  
| `deliveryStatus` | Integer | Indicates message delivery status. Can take any of the following values. -> `1` = Delivered to handset ->  `2` = Rejected from handset -> `4` = Buffered in transit (phone probably off / out of reception) ->  `8` = Accepted by SMS carrier ->  `16` = Rejected by SMS carrier</li> |  
| `cost`           | String  | Message cost in GBP (£)                          |  

***

#### call

| Representation  | Type    | Description                                                    |  
| ------------  | ----    | -----------                                                    |  
| `type`        | String  | Describes the type of resource.                                |  
| `uri`         | String  | The unique URI for this resource.                              |  
| `created`     | String  | The time that the resource was created in ISO8601 format.      |  
| `callType`    | String  | Whether the call was internal or not (`domain`/`OUT`).         |  
| `direction`   | String  | Direction of call (`IN`/`OUT`).                                |  
| `from`        | String  | The name or phone number of caller.                            |  
| `to`          | String  | The name or phone number of recipient.                         |  
| `callStarted` | String  | The time that the call began in ISO8601 format.                |  
| `outcome`     | String  | Whether or not the call was answered (`answered`/`no-answer`). |  
| `duration`    | Integer | The duration of call in seconds.                               |  
| `cost`        | Integer | The cost of call in GBP (£).                                   |  
| `callId`      | String  | A unique ID for each leg of the call.                          |  
| `linkedId`    | String  | The unique ID of the call itself.  This ID is the same across all legs of a single call and can be used to link multiple legs of a call together |  
| `links`       | Array   | Links to associated resources for this representation          |  


#### prompt

| Representation | Type    | Description                                               |  
| ------------ | ----    | -----------                                               |  
| `type`       | String  | Describes the type of resource.                           |  
| `uri`        | String  | The unique URI for this resource.                         |  
| `created`    | String  | The time that the resource was created in ISO8601 format. |  
| `name`       | String  | Name assigned to the prompt.                              |  
| `size`       | Integer | Size of the file in bytes.                                |  


#### recording

| Representation | Type    | Description                                               |  
| ------------ | ----    | -----------                                               |  
| `type`       | String  | Describes the type of resource.                           |  
| `uri`        | String  | The unique URI for this resource.                         |  
| `created`    | String  | The time that the resource was created in ISO8601 format. |  
| `direction`  | String  | Direction of call (`IN`/`OUT`).                           |  
| `partyId`    | String  | Username or phone number of the recorded party            |  
| `started`    | String  | The time that the recorded call began in ISO8601 format.  |  
| `size`       | Integer | Size of the file in bytes.                                |  
| `callId`     | String  | A unique ID for each leg of the call.                     |  
| `linkedId`   | String  | The unique ID of the call itself.  This ID is the same across all legs of a single call and can be used to link multiple legs of a call together. |  
| `endpoint`   | String  | URI to the endpoint of the [???]                          |  


#### music

| Representation | Type    | Description                                               |  
| ------------ | ----    | -----------                                               |  
| `type`       | String  | Describes the type of resource.                           |  
| `uri`        | String  | The unique URI for this resource.                         |  
| `created`    | String  | The time that the resource was created in ISO8601 format. |  
| `name`       | String  | Name assigned to the music.                               |  
| `size`       | Integer | Size of the file in bytes.                                |  
| `enabled`    | Boolean | Whether or not the music is enabled and will play         |  


#### timeinterval

| Representation | Type   | Description                                                    |  
| ------------ | ----   | -----------                                                    |  
| `type`       | String | Describes the type of resource - `timeinterval`.              |  
| `uri`        | String | The unique URI for this time interval.                         |  
| `created`    | String | The time that the time interval was created in ISO8601 format. |  
| `name`       | String | Name assigned to the time interval.                            |  
| `repeat`     | String | When the time interval repeats (`WEEKLY`/`YEARLY`).            |  
| `data`       | Array  | See `data` table below for further information on each parameter. --> `{` -> `"startTime" : "00:00",` -> `"endTime" : "23:59",` -> `"includeDays" : "MON-SUN",` -> `"dayOfMonth" : 25,` -> `"month" : "DEC"` -> `}` | 


| `data` Array  | Type    | Description                                                                         |  
| ------------  | ----    | -----------                                                                         |  
| `startTime`   | String  | Time interval start time (hh:mm format).                                            |  
| `endTime`     | String  | Time interval end time (hh:mm format).                                              |  
| `includeDays` | String  | Days time interval is active.                                                       |  
| `dayOfMonth`  | Integer | Numerical day of month time interval is active. Only valid when repeat is `YEARLY`. |  
| `month`       | String  | Month time interval is active. Only valid when repeat is `YEARLY`.                  |  


#### phone

| Representation       | Type    | Description                                                    |  
| ------------       | ----    | -----------                                                    |  
| `type`             | String  | Describes the type of resource (`phone`).                      |  
| `uri`              | String  | The unique URI for this extension.                             |  
| `created`          | String  | The time that the extension was created in ISO8601 format.     |  
| `shortNumber`      | String  | 3 digit short number identifier for this extension.            |  
| `name`             | String  | Name assigned to the extension.                                |  
| `email`            | String  | Email address to send voicemails to.                           |  
| `timeout`          | Integer | Ring timeout for this extension.                               |  
| `callWaiting`      | Boolean | Whether or not call waiting is enabled.                        |  
| `callRecording`    | String  | Whether call recordings are enabled `ALWAYS`/`OFF`/`ON_DEMAND` |  
| `voicemailEnabled` | Boolean | Whether or not voicemail is enabled.                           |  


#### queue

| Representation  | Type    | Description                                               |  
| ------------  | ----    | -----------                                               |  
| `type`        | String  | Describes the type of resource (`queue`).                 |  
| `uri`         | String  | The unique URI for this queue.                            |  
| `created`     | String  | The time that the queue was created in ISO8601 format.    |  
| `shortNumber` | String  | 3 digit short number identifier for this queue.           |  
| `name`        | String  | Name assigned to the queue.                               |  
| `maxWait`     | Integer | The maximum amount of time a caller can wait in the queue |  


#### ivr

| Representation  | Type    | Description                                          |  
| ------------  | ----    | -----------                                          |  
| `type`        | String  | Describes the type of resource (`ivr`).              |  
| `uri`         | String  | The unique URI for this ivr.                         |  
| `created`     | String  | The time that the ivr was created in ISO8601 format. |  
| `shortNumber` | String  | 3 digit short number identifier for this ivr.        |  
| `name`        | String  | Name assigned to the ivr.                            |  
| `timeout`     | Integer | Ring timeout for this ivr.                           |  


#### virtual

| Representation       | Type    | Description                                                        |  
| ------------       | ----    | -----------                                                        |  
| `type`             | String  | Describes the type of resource (`virtual`).                        |  
| `uri`              | String  | The unique URI for this virtual extension.                         |  
| `created`          | String  | The time that the virtual extension was created in ISO8601 format. |  
| `shortNumber`      | String  | 3 digit short number identifier for this virtual extension.        |  
| `name`             | String  | Name assigned to the virtual extension.                            |  
| `timeout`          | Integer | Ring timeout for this virtual extension.                           |  
| `destination`      | String  | Number to route calls to.                                          |  
| `screeningEnabled` | Boolean | Whether or not call screening is enabled.                          |  


#### mailbox

| Representation  | Type   | Description                                                 |  
| ------------  | ----   | -----------                                                 |  
| `type`        | String | Describes the type of resource (`mailbox`).                 |  
| `uri`         | String | The unique URI for this mailbox.                            |  
| `created`     | String | The time that the mailbox was created in ISO8601 format.    |  
| `shortNumber` | String | 3 digit short number identifier for this mailbox.           |  
| `name`        | String | Name assigned to the mailbox.                               |  
| `email`       | String | Email address to send messages recorded in this mailbox to. |  


#### group

| Representation          | Type    | Description                                            |  
| ------------          | ----    | -----------                                            |  
| `type`                | String  | Describes the type of resource (`group`).              |  
| `uri`                 | String  | The unique URI for this group.                         |  
| `created`             | String  | The time that the group was created in ISO8601 format. |  
| `shortNumber`         | String  | 3 digit short number identifier for this group.        |  
| `name`                | String  | Name assigned to the group.                            |  
| `memberTimeout`       | Integer | Ring timeout for each member of the group.             |  
| `cascadeDelay`        | Integer | Delay between ringing each member of the group.        |  
| `failoverDestination` | String  | URI of endpoint to route calls to on timeout.          |  


#### did

| Representation   | Type    | Description                                                                 |  
| ------------   | ----    | -----------                                                                 |  
| `type`         | String  | Describes the type of resource (`did`).                                     |  
| `uri`          | String  | The unique URI for this number.                                             |  
| `created`      | String  | The time that the number was created in ISO8601 format.                     |  
| `number`       | String  | The public number for this did.                                             |  
| `identifier`   | String  | The caller id that will be displayed for this number, blank for 'anonymous' |  
| `destination`  | String  | The destination that this number will route calls to.                       |  
| `smsEnabled`   | Boolean | Whether sms messages can be sent to this number.                            |  
| `routingRules` | Array   | Routing rules that apply to this number.                                    |  

| `routingRules` Array | Type   | Description                                                |  
| -------------------- | ----   | -----------                                                |  
| `timeInterval`       | String | URI of active time intervals on number                     |  
| `destination`        | String | URI of endpoints that the active time intervals forward to |  


#### fax

| Representation       | Type   | Description                                          |  
| ------------       | ----   | -----------                                          |  
| `type`             | String | Describes the type of resource (`fax`).              |  
| `uri`              | String | The unique URI for this fax.                         |  
| `created`          | String | The time that the fax was created in ISO8601 format. |  
| `number`           | String | The public number for this fax.                      |  
| `destinationEmail` | String | The email address that this fax will send faxes to.  |  


#### creditstatus

| Representation      | Type   | Description                                              |  
| ------------      | ----   | -----------                                              |  
| `type`            | String | Describes the type of resource (`creditstatus`).         |  
| `uri`             | String | The unique URI for this representation of credit status. |  
| `accountType`     | String | The type of account (`prepaid`/`postpaid`).              |  
| `creditRemaining` | Float  | Name or number of outgoing caller id.                    |  


#### outgoingcallerid

| Representation | Type    | Description                                                         |  
| ------------ | ----    | -----------                                                         |  
| `type`       | String  | Describes the type of resource (`outgoingcallerid`).                |  
| `uri`        | String  | The unique URI for this outgoing caller id.                         |  
| `created`    | String  | The time that the outgoing caller id was created in ISO8601 format. |  
| `number`     | String  | Name or number of outgoing caller id.                               |  
| `allowCalls` | Boolean | Whether calls can be made to this number.                           |  
| `allowSms`   | Boolean | Whether sms messages can be sent to this number.                    |  

#### customerbundle

| Representation  | Type    | Description                                             |  
| --------------  | ----    | -----------                                             |  
| `type`          | String  | Describes the type of resource (`customerbundle`).      |  
| `uri`           | String  | The unique URI for this bundle.                         |  
| `created`       | String  | The time that the bundle was created in ISO8601 format. |  
| `name`          | String  | Bundle name.                                            |  
| `inclusiveMins` | Integer | Total number of minutes in the bundle.                  |  
| `priceMonthly`  | Integer | Monthly cost in GBP (£).                                |  
| `validFrom`     | String  | Bundle start time in ISO8601 format.                    |  
| `validTo`       | String  | Bundle expiry time in ISO8601 format                    |  
| `usedMins`      | Integer | Bundle minutes remaining.                               |  
| `availableMins` | Integer | Bundle minutes used.                                    |  
| `autoRenew`     | Boolean | Whether the bundle set to automatically renew.          |  
| `status`        | String  | Returns either "ACTIVE" or "EXPIRED".                   |  

## Quick Reference

Version 1 of the API is accessible via https://pbx.sipcentric.com/api/v1

#### Customers

| URL               | Method | Functionality                                                    |  
| ---               | ------ | -------------                                                    |  
| `/customers`      | GET    | Retrieve information of all customers on account                 |  
| `/customers/{id}` | GET    | Retrieve a specific customer's information & available resources |  


#### Objects

| URL                             | Method | Functionality                    |  
| ---                             | ------ | -------------                    |  
| `/customers/me/{resource}`      | GET    | Retrieve all objects in resource |  
| `/customers/me/{resource}/{id}` | GET    | Retrieve a specific object       |  
| `/customers/me/{resource}`      | POST   | Create a new object in resource  |  
| `/customers/me/{resource}/{id}` | DELETE | Delete an object                 |  
| `/customers/me/{resource}/{id}` | PUT    | Update an object                 |  