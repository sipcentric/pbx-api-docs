# API V1

## Reference

### /phonebook

A really cool Sipcentric feature is the phone book!

#### List phone book entries

`GET /phonebook`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `pageSize` | int | The number of items to include per page (max 200) |
| `page` | int | The page number to return |

#### Create phone book entry

`POST /phonebook`

| JSON Parameters | Type | Description |
| --- | --- | --- |
| `type` | str | phonebookentry  |
| `name` | str | Name of contact |
| `phoneNumber` | str | Phone number for entry |
| `speedDial` | int | Optional speed dial key |


#### Read phone book entry

`GET /phonebook/{id}`

#### Delete phone book entry

`DELETE /phonebook/{id}`

### /sms

Short Message Service (SMS) is a text messaging service. You can send and receive SMS messages on our platform.

#### List SMS messages

`GET /sms`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `pageSize` | int | The number of items to include per page (max 200) |
| `page` | int | The page number to return |

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/sms?pageSize=1&page=1
```

Example response:

```
HTTP/1.1 200 OK

{
  "totalItems": 188,
  "pageSize": 1,
  "page": 1,
  "items":  [
     {
      "type": "smsmessage",
      "uri": "http://pbx.sipcentric.com/api/v1/customers/5/sms/253368",
      "created": "2014-05-14T14:58:39.000+0000",
      "direction": "out",
      "from": "01212854400",
      "to": "07557400000",
      "body": "Hey, this new API is awesome!",
      "sendStatus": "sent",
      "deliveryStatus": 1,
      "cost": 0.1
    }
  ],
  "nextPage": "http://pbx.sipcentric.com/api/v1/customers/me/sms?pageSize=1&page=2"
}
```

#### Get SMS Message

`GET /sms/{smsId}`

```
GET https://pbx.sipcentric.com/api/v1/customers/5/sms/253368
```

Example response:

```
HTTP/1.1 200 OK

{
  "type" : "smsmessage",
  "uri" : "http://pbx.sipcentric.com/api/v1/customers/5/sms/253368",
  "created" : "2014-05-14T14:58:39.000+0000",
  "direction" : "out",
  "from" : "Sipcentric",
  "to" : "07557400000",
  "body" : "Hey, this new API is awesome!",
  "sendStatus" : "sent",
  "deliveryStatus" : 1,
  "cost" : 0.100
}
```

Will retrieve a single SMS message.

#### Send SMS

`POST /sms`

| JSON Parameters | Type | Description |
| --------------- | ---- | ----------- |
| `type` | str | smsmessage  |
| `to` | str | Number to send message to |
| `from` | str | Name to display message from |
| `body` | str | Message body |

Example request:

```
POST https://pbx.sipcentric.com/api/v1/customers/me/sms

{
  "type": "smsmessage",
  "to": "07557400000",
  "from": "01212854400",
  "body": "Hey, this new API is awesome!"
}
```

Example response:

```
HTTP/1.1 201 Created

{
  "type": "smsmessage",
  "uri": "http://pbx.sipcentric.com/api/v1/customers/me/sms/253368",
  "direction": "out",
  "from": "01212854400",
  "to": "07557400000",
  "body": "Hey, this new API is awesome!",
  "sendStatus": "sent",
  "deliveryStatus": 0,
  "cost": 0.1
}
```


### /calls

List and make phone calls.

#### Originate call

`POST /calls`

| JSON Parameters | Type | Description |
| --------------- | ---- | ----------- |
| `type` | str | call  |
| `endpoint` | str | Number to originate call from |
| `to` | str | Number to call |

Example request:

```
POST https://pbx.sipcentric.com/api/v1/customers/me/calls

{
  "type": "call",
  "endpoint": "http://pbx.sipcentric.com/api/v1/customers/me/endpoints/1234",
  "to": "07557400000",
}
```

Example response:

```
HTTP/1.1 200 OK
```

#### Get call history

`GET /calls`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `createdAfter` | str | Include only records created after the specified date/time (inclusive). Required format is ISO8601 in UTC - e.g. '2014-05-14T13:26:45Z' |
| `createdBefore` | str |  |
| `startedAfter` | str |  |
| `from` | str |  |
| `to` | str |  |
| `direction` | str | in/out |
| `includeLocal` | str | true/false |
| `pageSize` | int | The number of items to include per page (max 200) |
| `page` | int | The page number to return |


Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/calls?pageSize=1
```

Example response:

```
HTTP/1.1 200 OK

{
  "totalItems": 23686,
  "pageSize": 1,
  "page": 1,
  "items": [
    {
      "type": "call",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/me/calls/7592317",
      "created": "2014-05-15T08:21:12.000+0000",
      "callType": "domain",
      "direction": "IN",
      "from": "01212854400",
      "to": "07557400000",
      "callStarted": "2014-05-15T08:20:51.000+0000",
      "outcome": "no-answer",
      "duration": 0,
      "cost": 0,
      "callId": "ast01-1400142051.1562723",
      "linkedId": "ast01-1400142051.1562723",
      "links": {
        "recordings": "https://pbx.sipcentric.com/api/v1/customers/me/recordings?linkedId=ast01-1400142051.1562723"
      }
    }
  ],
  "nextPage": "https://pbx.sipcentric.com/api/v1/customers/me/calls?pageSize=1&page=2"
}
```

Will retrieve a single call.

### /sounds

#### List sounds

`GET /sounds`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `pageSize` | int | The number of items to include per page (max 200) |
| `page` | int | The page number to return |
| `type` | str | Include only a specific type of sound file (prompt/music) |

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/sounds?pageSize=1&page=1
```

Example response:

```
HTTP/1.1 200 OK

{
  "totalItems" : 6,
  "pageSize" : 1,
  "page" : 1,
  "items" : [ {
    "type" : "prompt",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/sounds/1035",
    "created" : "2013-12-04T18:07:24.000+0000",
    "name" : "thank-you-for-calling",
    "size" : 129612
  } ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/me/sounds?pageSize=1&page=2"
}
```

#### Get sound

`GET /sounds/{soundId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25/sounds/1035
```

Example response:

```
HTTP/1.1 200 OK

{
  "type" : "prompt",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/sounds/1035",
  "created" : "2013-12-04T18:07:24.000+0000",
  "name" : "thank-you-for-calling",
  "size" : 129612
}
```