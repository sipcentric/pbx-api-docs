# API V1

## Reference

### /phonebook

A really cool Sipcentric feature is the phone book!

#### List phone book entries

`GET /phonebook`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `pageSize` | int | The number of items to include per page (max 200) |
| `page` | int | The page number to return |

#### Create phone book entry

`POST /phonebook`

| JSON Parameters | Type | Description |
| --- | --- | --- |
| `type` | str | phonebookentry  |
| `name` | str | Name of contact |
| `phoneNumber` | str | Phone number for entry |
| `speedDial` | int | Optional speed dial key |


#### Read phone book entry

`GET /phonebook/{id}`

#### Delete phone book entry

`DELETE /phonebook/{id}`

### /sms

Short Message Service (SMS) is a text messaging service. You can send and receive SMS messages on our platform.

#### List SMS messages

`GET /sms`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `pageSize` | int | The number of items to include per page (max 200) |
| `page` | int | The page number to return |

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/sms?pageSize=1&page=1
```

Example response:

```
HTTP/1.1 200 OK

{
  "totalItems": 188,
  "pageSize": 1,
  "page": 1,
  "items":  [
     {
      "type": "smsmessage",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/me/sms/253368",
      "created" : "2014-03-10T13:37:00.000+0000",
      "direction": "out",
      "from": "01212854400",
      "to": "07902000000",
      "body": "Hey, this API is awesome!",
      "sendStatus": "sent",
      "deliveryStatus": 1,
      "cost": 0.1
    }
  ],
  "nextPage": "https://pbx.sipcentric.com/api/v1/customers/me/sms?pageSize=1&page=2"
}
```

#### Get SMS Message

`GET /sms/{smsId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/sms/253368
```

Example response:

```
HTTP/1.1 200 OK

{
  "type" : "smsmessage",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/me/sms/253368",
  "created" : "2014-03-10T13:37:00.0000+0000",
  "direction" : "out",
  "from" : "07557000000",
  "to" : "07902000000",
  "body" : "Hey, this API is awesome!",
  "sendStatus" : "sent",
  "deliveryStatus" : 1,
  "cost" : 0.100
}
```

Will retrieve a single SMS message.

#### Send SMS

`POST /sms`

| JSON Parameters | Type | Description |
| --------------- | ---- | ----------- |
| `type` | str | smsmessage  |
| `to` | str | Number to send message to |
| `from` | str | Name to display message from |
| `body` | str | Message body |

Example request:

```
POST https://pbx.sipcentric.com/api/v1/customers/me/sms

{
  "type": "smsmessage",
  "to": "07902000000",
  "from": "07557000000",
  "body": "Hey, this API is awesome!"
}
```

Example response:

```
HTTP/1.1 201 Created

{
  "type": "smsmessage",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/me/sms/253368",
  "direction": "out",
  "from": "07557000000",
  "to": "07902000000",
  "body": "Hey, this API is awesome!",
  "sendStatus": "sent",
  "deliveryStatus": 0,
  "cost": 0.1
}
```


### /calls

List and make phone calls.

#### Originate call

`POST /calls`

| JSON Parameters | Type | Description |
| --------------- | ---- | ----------- |
| `type` | str | call  |
| `endpoint` | str | Number to originate call from |
| `to` | str | Number to call |

Example request:

```
POST https://pbx.sipcentric.com/api/v1/customers/me/calls

{
  "type": "call",
  "endpoint": "https://pbx.sipcentric.com/api/v1/customers/me/endpoints/1234",
  "to": "07902000000",
}
```

Example response:

```
HTTP/1.1 200 OK
```

#### Get call history

`GET /calls`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `createdAfter` | str | Include only records created after the specified date/time (inclusive) |
| `createdBefore` | str | Include only records created before the specified date/time (inclusive) |
| `startedAfter` | str | Include only records started after the specified date/time (inclusive) |
| `startedBefore` | str | Include only records started before the specified date/time (inclusive) |
| `from` | str | Include only calls from a specific number. Currently supports exact match only (no wildcards) |
| `to` | str | Include only calls to a specific number. Currently supports exact match only (no wildcards) |
| `direction` | str | Include only calls in a specific direction (in/out)
| `includeLocal` | str | Whether or not to include local calls. Note: only the outbound record is included for local calls, as the inbound record would be an exact replica (true/false) |
| `pageSize` | int | The number of items to include per page (max 200) |
| `page` | int | The page number to return |


Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/calls?pageSize=1
```

Example response:

```
HTTP/1.1 200 OK

{
  "totalItems": 23686,
  "pageSize": 1,
  "page": 1,
  "items": [
    {
      "type": "call",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/me/calls/7592317",
      "created" : "2014-03-10T13:37:00.000+0000",
      "callType": "domain",
      "direction": "IN",
      "from": "07557000000",
      "to": "07902000000",
      "callStarted": "2014-05-15T08:20:51.000+0000",
      "outcome": "no-answer",
      "duration": 0,
      "cost": 0,
      "callId": "ast01-1400142051.1562723",
      "linkedId": "ast01-1400142051.1562723",
      "links": {
        "recordings": "https://pbx.sipcentric.com/api/v1/customers/me/recordings?linkedId=ast01-1400142051.1562723"
      }
    }
  ],
  "nextPage": "https://pbx.sipcentric.com/api/v1/customers/me/calls?pageSize=1&page=2"
}
```

Will retrieve a single call.

### /sounds

#### List sounds

`GET /sounds`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `pageSize` | int | The number of items to include per page (max 200) |
| `page` | int | The page number to return |
| `type` | str | Include only a specific type of sound file (prompt/music) |

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/sounds?pageSize=1&page=1
```

Example response:

```
HTTP/1.1 200 OK

{
  "totalItems" : 6,
  "pageSize" : 1,
  "page" : 1,
  "items" : [ {
    "type" : "prompt",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/me/sounds/1035",
    "created" : "2014-03-10T13:37:00.0000+0000",
    "name" : "thank-you-for-calling",
    "size" : 129612
  } ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/me/sounds?pageSize=1&page=2"
}
```

#### Get sound

`GET /sounds/{soundId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/sounds/1035
```

Example response:

```
HTTP/1.1 200 OK

{
  "type" : "prompt",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/me/sounds/1035",
  "created" : "2014-03-10T13:37:00.0000+0000",
  "name" : "thank-you-for-calling",
  "size" : 129612
}
```

### /recordings

Fetch call recordings

#### List recordings

`GET /recordings`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `createdAfter` | str | Include only records created after the specified date/time (inclusive) |
| `createdBefore` | str | Include only records created before the specified date/time (inclusive) |
| `startedAfter` | str | Include only records started after the specified date/time (inclusive) |
| `startedBefore` | str | Include only records started before the specified date/time (inclusive) |
| `callId` | str | Include only recordings relating to a specific call ID |
| `linkedId` | str | Include only recordings relating to calls with the same linked ID |
| `direction` | str | Include only calls in a specific direction (in/out)
| `includeLocal` | str | Whether or not to include local calls. Note: only the outbound record is included for local calls, as the inbound record would be an exact replica (true/false) |
| `pageSize` | int | The number of items to include per page (max 200) |
| `page` | int | The page number to return |

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/recordings
```

Example response:

```
HTTP/1.1 200 OK

{
  "totalItems" : 5788,
  "pageSize" : 1,
  "page" : 1,
  "items" : [ 
    {
      "type" : "recording",
      "uri" : "https://pbx.sipcentric.com/api/v1/customers/me/recordings/1358371",
      "created" : "2014-03-10T13:37:00.0000+0000",
      "direction" : "IN",
      "partyId" : "106",
      "started" : "2014-05-14T15:41:25.000+0000",
      "size" : 9615,
      "callId" : "ast01-1400082083.1542464",
      "linkedId" : "ast01-1400082083.1542464",
      "endpoint" : "https://pbx.sipcentric.com/api/v1/customers/me/endpoints/2535"
    } 
  ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/me/recordings?pageSize=1&page=2"
}
```


#### Get recording

`GET /recordings`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/recordings/{recordingId}
```

Example response:

```
HTTP/1.1 200 OK

{
  "type": "recording",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/me/recordings/1358371",
  "created" : "2014-03-10T13:37:00.000+0000",
  "direction": "IN",
  "partyId": "106",
  "started": "2014-05-14T15:41:25.000+0000",
  "size": 9615,
  "callId": "ast01-1400082083.1542464",
  "linkedId": "ast01-1400082083.1542464",
  "endpoint": "https://pbx.sipcentric.com/api/v1/customers/me/endpoints/2535"
}
```

### /timeintervals

View time intervals on your account.

#### List time intervals

`GET /timeintervals`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `pageSize` | int | The number of items to include per page (max 200) |
| `page` | int | The page number to return |

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/timeintervals?pageSize=1&page=1
```

Example response:

```
HTTP/1.1 200 OK

{
  "totalItems": 12,
  "pageSize": 1,
  "page": 1,
  "items":  [
     {
      "type": "timeinterval",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/me/timeintervals/31",
      "created" : "2014-03-10T13:37:00.000+0000",
      "name": "Always",
      "repeat": "WEEKLY",
      "data":  [
         {
          "startTime": "00:00",
          "endTime": "23:59",
          "includeDays": "SAT-SUN"
        },
        {
          "startTime": "17:30",
          "endTime": "23:59",
          "includeDays": "MON-FRI"
        },
        {
          "startTime": "00:00",
          "endTime": "07:59",
          "includeDays": "MON-FRI"
        }
      ]
    }
  ]
}
```

#### Get time interval

`GET /timeintervals/{timeIntervalId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/timeintervals/31
```

Example response:

```
HTTP/1.1 200 OK

{
  "type": "timeinterval",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/me/timeintervals/31",
  "created" : "2014-03-10T13:37:00.000+0000",
  "name": "Always",
  "repeat": "WEEKLY",
  "data":  [
     {
      "startTime": "00:00",
      "endTime": "23:59",
      "includeDays": "MON-SUN"
    }
  ]
}
```


### /endpoints

View endpoints on your account.

#### List endpoints

`GET /endpoints`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `pageSize` | int | The number of items to include per page (max 200) |
| `page` | int | The page number to return |

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/endpoints?pageSize=1&page=1
```

Example response:

```
HTTP/1.1 200 OK

{
  "totalItems": 25,
  "pageSize": 1,
  "page": 1,
  "items":  [
     {
      "type": "ivr",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/me/endpoints/101",
      "created" : "2014-03-10T13:37:00.000+0000",
      "shortNumber": "001",
      "name": "Main IVR",
      "timeout": 0
    }
  ],
  "nextPage": "https://pbx.sipcentric.com/api/v1/customers/me/endpoints?pageSize=1&page=2"
}
```

#### Get endpoint

`GET /endpoint/{endpointID}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/endpoints/101
```

Example response:

```
HTTP/1.1 200 OK

{
  "type": "ivr",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/me/endpoints/101",
  "created" : "2014-03-10T13:37:00.000+0000",
  "shortNumber": "001",
  "name": "Main IVR",
  "timeout": 0
}
```

### /phonenumbers

View phone numbers on your account.

#### List phonenumbers

`GET /phonenumbers`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `pageSize` | int | The number of items to include per page (max 200) |
| `page` | int | The page number to return |

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/phonenumbers?pageSize=1&page=1
```

Example response:

```
HTTP/1.1 200 OK

{
  "totalItems": 15,
  "pageSize": 1,
  "page": 1,
  "items":  [
     {
      "type": "did",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/me/phonenumbers/47",
      "created" : "2014-03-10T13:37:00.000+0000",
      "number": "01212854747",
      "identifier": "DID",
      "destination": "https://pbx.sipcentric.com/api/v1/customers/me/endpoints/94",
      "smsEnabled": true
    }
  ],
  "nextPage": "https://pbx.sipcentric.com/api/v1/customers/me/phonenumbers?pageSize=1&page=2"
}
```

#### Get phone number

`GET /phonenumbers/{numberId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/phonenumbers/47
```

Example response:

```
HTTP/1.1 200 OK

{
  "type": "did",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/me/phonenumbers/47",
  "created" : "2014-03-10T13:37:00.000+0000",
  "number": "01212854747",
  "identifier": "DID",
  "destination": "https://pbx.sipcentric.com/api/v1/customers/me/endpoints/94",
  "smsEnabled": true
}
```

### /outgoingcallerids

View outgoing caller ids on your account.

#### List outgoing caller ids

`GET /outgoingcallerids`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `pageSize` | int | The number of items to include per page (max 200) |
| `page` | int | The page number to return |

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/outgoingcallerids?pageSize=1&page=1
```

Example response:

```
HTTP/1.1 200 OK

{
  "totalItems": 1,
  "pageSize": 1,
  "page": 1,
  "items":  [
     {
      "type": "outgoingcallerid",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/me/outgoingcallerids/114",
      "created" : "2014-03-10T13:37:00.000+0000",
      "number": "Sipcentric",
      "allowCalls": false,
      "allowSms": true
    }
  ]
}
```

#### Get outgoing caller id

`GET /outgoingcallerid/{numberId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/outgoingcallerid/114
```

Example response:

```
HTTP/1.1 200 OK

{
  "type": "outgoingcallerid",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/me/outgoingcallerids/114",
  "created" : "2014-03-10T13:37:00.000+0000",
  "number": "Sipcentric",
  "allowCalls": false,
  "allowSms": true
}
```

### /customers

View customers on your account.

#### List customers

`GET /customers`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `pageSize` | int | The number of items to include per page (max 200) |
| `page` | int | The page number to return |

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers?pageSize=1&page=1
```

Example response:

```
HTTP/1.1 200 OK

{
  "totalItems": 1,
  "pageSize": 1,
  "page": 1,
  "items":  [
     {
      "type": "customer",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25",
      "created" : "2014-03-10T13:37:00.000+0000",
      "company": "Bloggs co",
      "firstName": "Fred",
      "lastName": "Bloggs",
      "telephone": "07557000000",
      "email": "contact@fredbloggs.com",
      "address1": "60 Cleveland St",
      "address2": "Fitzrovia",
      "city": "London",
      "postcode": "W1T 4JZ"
    }
  ]
}
```

#### Get customer

`GET /customers/{numberId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25
```

Example response:

```
HTTP/1.1 200 OK

{
  "type": "customer",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25",
  "created" : "2014-03-10T13:37:00.000+0000",
  "company": "Bloggs co",
  "firstName": "Fred",
  "lastName": "Bloggs",
  "telephone": "07557000000",
  "email": "contact@fredbloggs.com",
  "address1": "60 Cleveland St",
  "address2": "Fitzrovia",
  "city": "London",
  "postcode": "W1T 4JZ",
  "links":  {
    "recordings": "https://pbx.sipcentric.com/api/v1/customers/me/recordings",
    "phoneBook": "https://pbx.sipcentric.com/api/v1/customers/me/phonebook",
    "timeIntervals": "https://pbx.sipcentric.com/api/v1/customers/me/timeintervals",
    "endpoints": "https://pbx.sipcentric.com/api/v1/customers/me/endpoints",
    "phoneNumbers": "https://pbx.sipcentric.com/api/v1/customers/me/phonenumbers",
    "sms": "https://pbx.sipcentric.com/api/v1/customers/me/sms",
    "creditStatus": "https://pbx.sipcentric.com/api/v1/customers/me/creditstatus",
    "calls": "https://pbx.sipcentric.com/api/v1/customers/me/calls",
    "sounds": "https://pbx.sipcentric.com/api/v1/customers/me/sounds",
    "outgoingCallerIds": "https://pbx.sipcentric.com/api/v1/customers/me/outgoingcallerids"
  }
}
```

### /creditstatus

View customers and remaining calling credit.

#### Get credit status

`GET /creditstatus`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me/creditstatus
```

Example response:

```
HTTP/1.1 200 OK

{
  "type": "creditstatus",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/me/creditstatus",
  "accountType": "postpaid",
  "creditRemaining": 191.571
}
```

### /callbundles

View call bundles on your account.

#### List call bundles

`GET /callbundles`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| `pageSize` | int | The number of items to include per page (max 200) |
| `page` | int | The page number to return |

Example request:

```
GET https://pbx.sipcentric.com/api/v1/callbundles?pageSize=1&page=1
```

Example response:

```
HTTP/1.1 200 OK

{
  "totalItems": 20,
  "pageSize": 1,
  "page": 1,
  "items":  [
     {
      type: "customerbundle",
      uri: "https://pbx.sipcentric.com/api/v1/customers/me/callbundles/1040",
      created: "2014-03-01T00:00:00.000+0000",
      name: "1000 Mins - Local/National (Free)",
      inclusiveMins: 1000,
      priceMonthly: 5,
      validFrom: "2014-03-01T00:00:00.000+0000",
      validTo: "2014-03-31T23:59:59.999+0000",
      usedMins: 57,
      availableMins: 943,
      autoRenew: true,
      status: "ACTIVE"
    }
  ]
}
```

#### Get call bundle

`GET /callbundles/{numberId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/callbundles/1040
```

Example response:

```
HTTP/1.1 200 OK

{
  type: "customerbundle",
  uri: "https://pbx.sipcentric.com/api/v1/customers/me/callbundles/1040",
  created: "2014-03-01T00:00:00.000+0000",
  name: "1000 Mins - Local/National (Free)",
  inclusiveMins: 1000,
  priceMonthly: 5,
  validFrom: "2014-03-01T00:00:00.000+0000",
  validTo: "2014-03-31T23:59:59.999+0000",
  usedMins: 57,
  availableMins: 943,
  autoRenew: true,
  status: "ACTIVE"
}
```
