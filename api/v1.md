# API v1

## Overview

#### Base URL

All resource URIs referenced in this documentation have the following base:
```
https://pbx.sipcentric.com/api/v1
```

All API requests should be made over HTTPS, rather than over HTTP.

#### Limits

To prevent individual applications from degrading the overall user experience, we limit the number of requests that can be made in any **60 minute** window to **1200 per user**.

This limit is not intended to restrict your creativity in any way, so if you need more please email support@sipcentric.com detailing your requirements. However, you are encouraged to cache information locally, wherever possible, and to design your application in a way which avoids unnecessary or repeat requests.

You can see your current status by checking the HTTP headers included in each response from us:

- `X-RateLimit-Limit`: the number of requests allowed per 60 minute window
- `X-RateLimit-Remaining`: the number of requests left for the 60 minute window
- `X-RateLimit-Reset`: the number of seconds before next reset

For example:
```
X-RateLimit-Limit: 1200
X-RateLimit-Remaining: 11
```

#### HTTP Methods

Instead of defining its own, arbitrary methods, the Sipcentric API utilizes four standard HTTP methods for interaction with all resources as follows:

##### GET

*Retrieving* a representation of a resource is as easy as GETting its URI. A simple way to test this is to type the URI of the desired resource into the address bar of your web browser.

###### Response Codes

| Status Code | Type              | Description                                                                                  |
| ----------- | ----              | -----------                                                                                  |
| 200         | Ok                | Your request was successful and the response body contains the representation.               |
| 304         | Not Modified      | The client's cached representation is still valid (conditional GET).                         |  
| 401         | Unauthorized      | The credentials supplied are invalid, or insufficient to access the requested resource.      |  
| 404         | Not Found         | No resource was found at the requested location.                                             |  
| 429         | Too Many Requests | You have reached your request limit for the current time window.                             |  
| 500         | Server Error      | Something went wrong our end. If the problem persists please contact support@sipcentric.com. |  

##### POST

The POST method is used for *creating* resources. The representation of the object to be created should be contained within the request body, and the `Content-Type` header should be set according to the format you are sending, e.g. `application/xml` or `application/json`. See [Response Formats](#response-formats) for the formats we can accept.

###### Response Codes

| Status Code | Type               | Description                                                                                                          |  
| ----------- | ----               | -----------                                                                                                          |  
| 201         | Created            | The request was successful and the response body contains a representation of the newly-created resource. The `Location` header will also be populated with the resource URI. |  
| 400         | Bad Request        | There is a problem with your request and/or your data has failed validation. See the response body for more details. |  
| 401         | Unauthorized       | The credentials supplied are invalid, or insufficient to create the resource.                                        |  
| 404         | Not Found          | The location to which you are POSTing does not exist.                                                                |  
| 405         | Method Not Allowed | The specified resource cannot be POSTed to.                                                                          |  
| 429         | Too Many Requests  | You have reached your request limit for the current time window.                                                     |  
| 500         | Server Error       | The server has responded with an error. If the problem persists please contact support@sipcentric.com.               |  

##### PUT

You should use the PUT method to *update* or *modify* resources. A representation of the object and its updated properties should be included in the body, and the `Content-Type` header set according to the format of the representation you are sending. See [Response Formats](#response-formats) for the formats we can accept.

###### Response Codes

| Status Code | Type               | Description                                                                                                          |  
| ----------- | ----               | -----------                                                                                                          |  
| 200         | Ok                 | The resource was successfully updated and the response body contains its new representation.                         |  
| 400         | Bad Request        | There is a problem with your request and/or your data has failed validation. See the response body for more details. |  
| 401         | Unauthorized       | The credentials supplied are invalid, or insufficient to update the resource.                                        |  
| 404         | Not Found          | The resource you are trying to update does not exist.                                                                |  
| 405         | Method Not Allowed | The specified resource is read-only and does not allow updates.                                                      |  
| 429         | Too Many Requests  | You have reached your request limit for the current time window.                                                     |  
| 500         | Server Error       | The server has responded with an error. If the problem persists please contact support@sipcentric.com.               |  

##### DELETE

Finally, where supported, resources may be *removed* using the DELETE method. Please be careful though, as deleted resources cannot be restored afterwards!

###### Response Codes

| Status Code | Type               | Description                                                                                                     |  
| ----------- | ----               | -----------                                                                                                     |  
| 204         | Deleted            | The resource was successfully deleted. The response body will be empty as there is no representation to return. |  
| 401         | Unauthorized       | The credentials supplied are invalid, or insufficient to delete the resource.                                   |  
| 404         | Not Found          | The resource you are trying to remove does not exist.                                                           |  
| 405         | Method Not Allowed | The specified resource is read-only or not removable.                                                           |  
| 429         | Too Many Requests  | You have reached your request limit for the current time window.                                                |  
| 500         | Server Error       | The server has responded with an error. If the problem persists please contact support@sipcentric.com.          |  

##### Method Overloading

Not all HTTP libraries support the PUT and DELETE methods. However, it is possible to achieve the same outcome by using POST and including a `_method` query parameter in the request URL, with a value of either PUT or DELETE. For example, take the following DELETE request:

```
DELETE /customers/8425/numbers/44675
```

If your chosen library only supports GET or POST, this request can easily be simulated as follows:

```
POST /customers/8425/numbers/44675?_method=DELETE
```

#### Authentication

Authentication to the Sipcentric API occurs via [HTTP Basic Authentication](http://en.wikipedia.org/wiki/Basic_authentication_scheme), with the same credentials as you would use to login to the web portal. Your credentials should be provided with every request.

Most HTTP libraries will handle Basic Authentication details automatically. To do it manually, include an `Authorization` header with a value of `Basic <credentials>` in every request, where “credentials” is a Base64-encoded version of the string "username:password". For example:

```
Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==
```

As all Sipcentric accounts can have unlimited users, you may want to create a user specifically for the API, or for an application that uses the API.

Consumers of the API must authenticate at one of three levels:

- Extension User
- Company Admin
- Reseller

#### Response Formats

We generally send (and receive) representations of objects in [JSON](http://en.wikipedia.org/wiki/JSON) format. There may be exceptions (in the case of sound files, for example), but these will be highlighted in the documentation specific to those resources.

For each request you should specify the `Accept` header, which we will evaluate and where possible, return a representation according to your preferred choice. For example:

```
Accept: application/json
```

Although including the `Accept` header in your request is the preferred method of specifying your desired representation format, it may not always be possible to include this header.

If an `Accept` header cannot be specified, you can append the desired type to the request URL instead, as in the example below.

```html
https://pbx.sipcentric.com/api/v1/customers/1234/calls.json
```

This will override any `Accept` headers that have been added by your client and, in the above example, return a JSON representation.

#### List Resources

Some resources are in fact collections of other resources. For example, a list of all telephone
numbers assigned to a particular customer account can be found by querying (GETting) the
“phonenumbers” sub-resource. Similarly, new numbers can be added to the collection by POSTing to it.

##### Pagination

In some cases, lists of items can be quite long. To preserve bandwidth and reduce response time,
lists are instead divided across multiple pages. To assist with pagination, a list resource will always
contain the following information:

| Property   | Description                                                  |
| ---------- | ------------------------------------------------------------ |
| totalItems | The total number of items in the collection.                 |
| pageSize   | The number of items per page.                                |
| page       | The current page number.                                     |
| items[]    | The items included in the current page.                      |
| prevPage   | A link to the previous page (if it exists).                  |
| nextPage   | A link to the next page (again, if it exists).               |


Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/1234/phonenumbers?pageSize=5&page=2
```

```response
HTTP/1.1 200 OK

{
  "totalItems": 21,
  "pageSize": 5,
  "page": 2,
  "items": [
    {
      "type": "did",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/1234/phonenumbers/2468",
      ...
    },
    {
      "type": "did",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/1234/phonenumbers/1365",
      ...
    },
    {
      "type": "did",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/1234/phonenumbers/4775",
      ...
    },
    {
      "type": "did",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/1234/phonenumbers/2164",
      ...
    },
    {
      "type": "did",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/1234/phonenumbers/3647",
      ...
    }
  ],
  "prevPage": "https://pbx.sipcentric.com/api/v1/customers/1234/phonenumbers?pageSize=5&page=1",
  "nextPage": "https://pbx.sipcentric.com/api/v1/customers/1234/phonenumbers?pageSize=5&page=3"
}
    
```

##### Query Parameters

Some list resources will have specific parameters that can be used to filter results (see individual resource
documentation for details). However as a minimum, all list resources support the following query
parameters:

| Parameter  | Description                                                  |
| ---------- | ------------------------------------------------------------ |
| pageSize   | The number of items per page (default 20 / maximum 200).     |
| page       | The page number to return (default 1).                       |


For example, to limit results to 10 per page and return the second page:

`GET /customers/8425/phonenumbers?pageSize=10&page=2`


#### Data Formats

##### Dates & Times

All dates and times are formatted according to the ISO 8601 profile. For example:

`2012-09-26T13:47:28Z`


## Customer Resources

#### Customers

| Resource Information           |             |  
| --------------------           | ---         |  
| Location                       | /customers  |  
| Rate Limited?                  | Yes         |  
| Requests per rate limit window | 1200/hour   |  
| Authentication                 | Basic Auth  |  
| HTTP Method(s)                 | [GET](#get) |  
| JSON Representation(s)         | customer    |  
| Additional Formats             | None        |  

The customers resource is the starting point for most account-level operations. Each customer instance represents an account on the Sipcentric platform - it encapsulates a single company/PBX and all of its sub-resources.

```exampleRepresentation

{
  "type": "customer",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25",
  "created" : "2014-03-10T13:37:00.000+0000",
  "company": "Bloggs co",
  "firstName": "Fred",
  "lastName": "Bloggs",
  "telephone": "07557000000",
  "email": "contact@fredbloggs.com",
  "address1": "60 Cleveland St",
  "address2": "Fitzrovia",
  "city": "London",
  "postcode": "W1T 4JZ",
  "links": {
    "callBundles" : "https://pbx.sipcentric.com/api/v1/customers/25/callbundles",
    "recordings": "https://pbx.sipcentric.com/api/v1/customers/25/recordings",
    "phoneBook": "https://pbx.sipcentric.com/api/v1/customers/25/phonebook",
    "timeIntervals": "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals",
    "endpoints": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints",
    "phoneNumbers": "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers",
    "sms": "https://pbx.sipcentric.com/api/v1/customers/25/sms",
    "creditStatus": "https://pbx.sipcentric.com/api/v1/customers/25/creditstatus",
    "calls": "https://pbx.sipcentric.com/api/v1/customers/25/calls",
    "sounds": "https://pbx.sipcentric.com/api/v1/customers/25/sounds",
    "outgoingCallerIds": "https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids"
  }
}
```

| Type: *customer*              |                                                                      |  
| --------------                | -----------                                                          |  
| **Property**                  | **Description**                                                      |  
| type <br> *required*          | Representation type ("customer").  <br> *String*                     |  
| uri <br> *read-only*          | URI of this instance.  <br> *String*                                 |  
| created <br> *read-only*      | Date/time the account was created (ISO8601 format).  <br> *String* |  
| company <br> *required*       | Name of the company on the account.  <br> *String*                   |  
| firstName <br> *required*     | First name of customer.  <br> *String*                               |  
| lastName <br> *required*      | Last name of customer.  <br> *String*                                |  
| telephone <br> *required*     | Telephone number of customer.  <br> *String*                         |  
| email <br> *required*         | Email address of customer.  <br> *String*                            |  
| address1 <br> *required*      | First line of address of customer.  <br> *String*                    |  
| address2 <br> *optional*      | Second line of address of customer.  <br> *String*                   |  
| city <br> *required*          | Address city of customer.  <br> *String*                             |  
| postcode <br> *required*      | Address postcode of customer.  <br> *String*                         |  
| links[] <br> *read-only*      | A collection of links to related sub-resources.  <br> *Array*        |  


##### List customers

`GET /customers`

Lists all customer accounts to which the authenticating user has access. When authenticated as an extension user or a company admin, this will only return their own account. However, when authenticated as a reseller, all customer accounts owned by that reseller will be returned.

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers
```


```response
HTTP/1.1 200 OK

{
  "totalItems": 1,
  "pageSize": 1,
  "page": 1,
  "items": [
    {
      "type": "customer",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25",
      "created" : "2014-03-10T13:37:00.000+0000",
      "company": "Bloggs co",
      "firstName": "Fred",
      "lastName": "Bloggs",
      "telephone": "07557000000",
      "email": "contact@fredbloggs.com",
      "address1": "60 Cleveland St",
      "address2": "Fitzrovia",
      "city": "London",
      "postcode": "W1T 4JZ"
    }
  ]
}
```


##### Get customer

`GET /customers/{customerId}`

Returns a single customer instance, providing the user is allowed access to that customer. In the case of company admin/extension users, the special ID of `me` can also be used to return the account to which the current user belongs.

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/me
```


```response
HTTP/1.1 200 OK

{
  "type": "customer",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25",
  "created" : "2014-03-10T13:37:00.000+0000",
  "company": "Bloggs co",
  "firstName": "Fred",
  "lastName": "Bloggs",
  "telephone": "07557000000",
  "email": "contact@fredbloggs.com",
  "address1": "60 Cleveland St",
  "address2": "Fitzrovia",
  "city": "London",
  "postcode": "W1T 4JZ",
  "links": {
    "callBundles" : "https://pbx.sipcentric.com/api/v1/customers/25/callbundles",
    "recordings": "https://pbx.sipcentric.com/api/v1/customers/25/recordings",
    "phoneBook": "https://pbx.sipcentric.com/api/v1/customers/25/phonebook",
    "timeIntervals": "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals",
    "endpoints": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints",
    "phoneNumbers": "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers",
    "sms": "https://pbx.sipcentric.com/api/v1/customers/25/sms",
    "creditStatus": "https://pbx.sipcentric.com/api/v1/customers/25/creditstatus",
    "calls": "https://pbx.sipcentric.com/api/v1/customers/25/calls",
    "sounds": "https://pbx.sipcentric.com/api/v1/customers/25/sounds",
    "outgoingCallerIds": "https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids"
  }
}
```


#### Phone Book

| Resource Information           |                                                                        |  
| --------------------           | ---                                                                    |  
| Location                       | /customers/{customerId}/phonebook                                      |  
| Rate Limited?                  | Yes                                                                    |  
| Requests per rate limit window | 1200/hour                                                              |  
| Authentication                 | Basic Auth                                                             |  
| HTTP Method(s)                 | [GET](#get) <br> [POST](#post) <br> [DELETE](#delete) <br> [PUT](#put) |  
| JSON Representation(s)         | phonebookentry                                                         |  
| Additional Formats             | None                                                                   |  

The phonebook sub-resource allows users to read and organize an account's shared phone book entries. Each entry is represented by a `phonebookentry` and can be created, read, updated, and deleted via this resource.

```exampleRepresentation
{
  "type" : "phonebookentry",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/5/phonebook/773",
  "created" : "2014-03-10T13:38:00.000+0000",
  "name" : "Sipcentric",
  "phoneNumber" : "01212854400",
  "speedDial" : 5
}
```

| Type: *phonebookentry*      |                                                                          |  
| --------------              | -----------                                                              |  
| **Property**                | **Description**                                                          |  
| type <br> *required*        | Representation type ("phonebookentry").  <br> *String*                   |  
| uri <br> *read-only*        | URI of this instance.  <br> *String*                                     |  
| created <br> *read-only*    | Date/time the entry was created (ISO8601 format).  <br> *String*      |  
| name <br> *required*        | Name of phone book entry.  <br> *String*                                 |  
| phoneNumber <br> *required* | Phone number of phone book entry.  <br> *String*                         |  
| speedDial <br> *optional*   | Up to four digit speed-dial number for phone book entry.  <br> *Integer* |  


##### List phone book entries

`GET /customers/{customerId}/phonebook`

Return a list of every `phonebookentry` on the customer account.

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25/phonebook?pageSize=2&page=1
```

```response
HTTP/1.1 200 OK

{
  "totalItems" : 18,
  "pageSize" : 2,
  "page" : 1,
  "items" : [ 
    {
      "type" : "phonebookentry",
      "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/phonebook/716",
      "created" : "2014-03-10T13:37:00.000+0000",
      "name" : "Fred Mobile",
      "phoneNumber" : "07902000000",
      "speedDial" : 3
    }, {
      "type" : "phonebookentry",
      "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/phonebook/773",
      "created" : "2014-03-10T13:38:00.000+0000",
      "name" : "Sipcentric",
      "phoneNumber" : "01212854400"
    }
  ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/25/phonebook?pageSize=2&page=2"
}
```


##### Read phone book entry

`GET /customers/{customerId}/phonebook/{entryId}`

Returns the instance of an individual `phonebookentry`.

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25/phonebook/773
```


```response
HTTP/1.1 200 OK

{
  "type" : "phonebookentry",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/phonebook/773",
  "created" : "2014-03-10T13:38:00.000+0000",
  "name" : "Sipcentric",
  "phoneNumber" : "01212854400"
}

```


##### Create phone book entry

`POST /customers/{customerId}/phonebook`

To create a new phone book entry, a representation of a `phonebookentry` must be POSTed to the `phonebook` resource. The newly created `phonebookentry` representation will then be included in the body of the response.

Example request:

```
POST https://pbx.sipcentric.com/api/v1/customers/25/phonebook

{
  "type" : "phonebookentry",
  "name" : "Fred Mobile",
  "phoneNumber" : "07902000000",
  "speedDial" : 4
}
```

```response
HTTP/1.1 201 Created

{
  "type": "phonebookentry",
  "uri": "http://pbx.sipcentric.com/api/v1/customers/25/phonebook/716",
  "created" : "2014-03-10T13:38:00.000+0000",
  "name": "Fred Mobile",
  "phoneNumber": "07902000000",
  "speedDial": 4
}
```


##### Update phone book entry

`PUT /customers/{customerId}/phonebook/{entryId}`

To update a `phonebookentry`, a representation of the updated `phonebookentry` must be PUT to that instance resource. The updated `phonebookentry` representation will then be returned in the body of the response.

Example request:

```
PUT https://pbx.sipcentric.com/api/v1/customers/25/phonebook/716

{
  "type" : "phonebookentry",
  "name" : "Fred Mobile",
  "phoneNumber" : "07825000000",
  "speedDial" : 12
}
```

```response
HTTP/1.1 200 OK

{
  "type": "phonebookentry",
  "uri": "http://pbx.sipcentric.com/api/v1/customers/25/phonebook/716",
  "created" : "2014-03-10T13:38:00.000+0000",
  "name": "Fred Mobile",
  "phoneNumber": "07825000000",
  "speedDial": 12
}
```


##### Delete phone book entry

`DELETE /customers/{customerId}/phonebook/{entryId}`

To delete a `phonebookentry`, a DELETE request must be made to the instance resource.

```
DELETE https://pbx.sipcentric.com/api/v1/customers/25/phonebook/716
```

```response
HTTP/1.1 204 No Content
```


#### SMS

| Resource Information           |                                |  
| --------------------           | ---                            |  
| Location                       | /customers/{customerId}/sms    |  
| Rate Limited?                  | Yes                            |  
| Requests per rate limit window | 1200/hour                      |  
| Authentication                 | Basic Auth                     |  
| HTTP Method(s)                 | [GET](#get) <br> [POST](#post) |  
| JSON Representation(s)         | smsmessage                     |  
| Additional Formats             | None                           |  

The SMS sub-resource contains a record of every SMS message sent or received on the account, each item represented by a single `smsmessage`. You can also send new SMS messages by POSTing a new `smsmessage` representation to the resource.

```
{
  "type" : "smsmessage",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/sms/253368",
  "created" : "2014-03-10T13:37:00.0000+0000",
  "direction" : "out",
  "from" : "07557000000",
  "to" : "07902000000",
  "body" : "Hey, this API is awesome!",
  "sendStatus" : "sent",
  "deliveryStatus" : 1,
  "cost" : 0.1
}
```

| Type: *smsmessage*              |                                                                                                                                                                                                                                                            |  
| --------------                  | ---                                                                                                                                                                                                                                                        |  
| **Property**                    | **Description**                                                                                                                                                                                                                                            |  
| type <br> *required*            | Representation type ("smsmessage"). <br> *String*                                                                                                                                                                                                          |  
| uri  <br> *read-only*           | URI of this instance. <br> *String*                                                                                                                                                                                                                        |  
| created <br> *read-only*        | Date/time the message was created (ISO8601 format). <br> *String*                                                                                                                                                                                        |  
| direction <br> *read-only*      | Direction of message. <br> *Enum: IN, OUT*                                                                                                                                                                                                                 |  
| from <br> *required*            | Name or phone number of sender. <br> *String*                                                                                                                                                                                                              |  
| to <br> *required*              | Phone number of recipient. <br> *String*                                                                                                                                                                                                                   |  
| body  <br> *required*           | Message body. <br> *String*                                                                                                                                                                                                                                |  
| sendStatus <br> *read-only*     | Indicates message send status. <br> *Enum: PENDING, SENT, FAILED*                                                                                                                                                                                          |  
| deliveryStatus <br> *read-only* | Indicates message delivery status: <br> 1 = Delivered to handset <br>  2 = Rejected from handset <br> 4 = Buffered in transit (phone probably off / out of reception) <br>  8 = Accepted by SMS carrier <br>  16 = Rejected by SMS carrier  <br> *Integer* |  
| cost <br> *read-only*           | Message cost in GBP (£). <br> *Float*                                                                                                                                                                                                                      |  

##### List SMS messages

`GET /customers/{customerId}/sms`

Returns a list of every `smsmessage` on the account.

```
GET https://pbx.sipcentric.com/api/v1/customers/25/sms?pageSize=2&page=1
```

```response
HTTP/1.1 200 OK

{
  "totalItems": 188,
  "pageSize": 2,
  "page": 1,
  "items":  [
     {
      "type": "smsmessage",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/sms/253368",
      "created" : "2014-03-10T13:37:00.000+0000",
      "direction": "out",
      "from": "01212854400",
      "to": "07902000000",
      "body": "Hey, this API is awesome!",
      "sendStatus": "sent",
      "deliveryStatus": 1,
      "cost": 0.1
    }, {
      "type": "smsmessage",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/sms/253369",
      "created" : "2014-03-10T13:38:00.000+0000",
      "direction": "in",
      "from": "07902000000",
      "to": "01212854400",
      "body": "I know, it's great!",
      "cost": 0.0
    } ],
  "nextPage": "https://pbx.sipcentric.com/api/v1/customers/25/sms?pageSize=2&page=2"
}
```
 
##### Get SMS Message

`GET /customers/{customerId}/sms/{smsId}`

Returns the instance of a specific `smsmessage`.

```
GET https://pbx.sipcentric.com/api/v1/customers/25/sms/253368
```

```response
HTTP/1.1 200 OK

{
  "type" : "smsmessage",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/sms/253368",
  "created" : "2014-03-10T13:37:00.0000+0000",
  "direction" : "out",
  "from" : "07557000000",
  "to" : "07902000000",
  "body" : "Hey, this API is awesome!",
  "sendStatus" : "sent",
  "deliveryStatus" : 1,
  "cost" : 0.1
}
```

##### Send SMS

`POST /customers/{customerId}/sms`

To send a new SMS, simply POST a representation of a new `smsmessage` to the list resource. If successful, a representation of the newly created `smsmessage` will be returned in the body of the response.

```
POST https://pbx.sipcentric.com/api/v1/customers/25/sms

{
  "type": "smsmessage",
  "to": "07902000000",
  "from": "07557000000",
  "body": "Hey, this API is awesome!"
}
```

```response
HTTP/1.1 201 Created

{
  "type": "smsmessage",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/sms/253368",
  "direction": "out",
  "from": "07557000000",
  "to": "07902000000",
  "body": "Hey, this API is awesome!",
  "sendStatus": "sent",
  "deliveryStatus": 1,
  "cost": 0.1
}
```
 
#### Calls

| Resource Information           |                                |  
| --------------------           | ---                            |  
| Location                       | /customers/{customerId}/calls          |  
| Rate Limited?                  | Yes                            |  
| Requests per rate limit window | 1200/hour                      |  
| Authentication                 | Basic Auth                     |  
| HTTP Method(s)                 | [GET](#get) <br> [POST](#post) |  
| JSON Representation(s)         | call                           |  
| Additional Formats             | `text/csv`                     |  

The calls sub-resource can be used to fetch the call history of an account, as well as to originate new calls.

```
{
  "type": "call",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/calls/7592317",
  "created" : "2014-03-10T13:37:00.000+0000",
  "callType": "domain",
  "direction": "IN",
  "from": "07557000000",
  "to": "07902000000",
  "callStarted": "2014-03-10T13:37:00.000+0000",
  "outcome": "no-answer",
  "duration": 0,
  "cost": 0,
  "callId": "ast01-1400142051.1562723",
  "linkedId": "ast01-1400142051.1562723",
  "links": {
    "recordings": "https://pbx.sipcentric.com/api/v1/customers/25/recordings?linkedId=ast01-1400142051.1562723"
  }
}
```

| Type: *call*                 |                                                                                                                                                                 |  
| --------------               | -----------                                                                                                                                                     |  
| **Property**                 | **Description**                                                                                                                                                 |  
| type <br> *required*         | Representation type ("call"). <br> *String*                                                                                                                     |  
| uri <br> *read-only*         | URI of this resource. <br> *String*                                                                                                                             |  
| created <br> *read-only*     | Date/time the call record was created (ISO861 format). <br> *String*                                                                                         |  
| callType <br> *required*     | Whether the call was internal or not. <br> *Enum: domain, external*                                                                                             |  
| direction <br> *read-only*   | Direction of call. <br> *Enum: IN, OUT*                                                                                                                         |  
| from <br> *required*         | The name or phone number of caller. <br> *String*                                                                                                               |  
| to <br> *required*           | The name or phone number of recipient. <br> *String*                                                                                                            |  
| callStarted <br> *read-only* | The time that the call began in ISO8601 format. <br> *String*                                                                                                   |  
| outcome <br> *read-only*     | Whether or not the call was answered. <br> *Enum: answered, no-answer*                                                                                          |  
| duration <br> *read-only*    | The duration of call in seconds. <br> *Integer*                                                                                                                 |  
| cost <br> *read-only*        | The cost of call in GBP (£). <br> *Float*                                                                                                                       |  
| callId <br> *read-only*      | A unique ID for each leg of the call. <br> *String*                                                                                                             |  
| linkedId <br> *read-only*    | The unique ID of the call itself.  This ID is the same across all legs of a single call and can be used to link multiple legs of a call together. <br> *String* |  
| links[] <br> *read-only*       | Links to associated resources for this representation. <br> *Array*                                                                                             |  

##### Get call history

`GET /customers/{customerId}/calls`

Making a GET request to the list resource will return a history of the calls made/received on an account. The returned list will contain a collection of `call` representations and may be filtered using the following (optional) query parameters:

| Query String Parameters | Type    | Description                                                                                                                                                                                     |  
| ----------------------- | ----    | -----------                                                                                                                                                                                     |  
| createdAfter            | String  | Include only records created after the specified. date/time                                                                                                                                      |  
| createdBefore           | String  | Include only records created before the specified. date/time                                                                                                                                     |  
| startedAfter            | String  | Include only records started after the specified. date/time                                                                                                                                      |  
| startedBefore           | String  | Include only records started before the specified. date/time                                                                                                                                     |  
| from                    | String  | Include only calls from a specific number. Currently supports exact match only (no wildcards).                                                                                                   |  
| to                      | String  | Include only calls to a specific number. Currently supports exact match only (no wildcards).                                                                                                     |  
| direction               | String  | Include only calls in a specific direction (in/out).                                                                                                                                             |  
| includeLocal | Boolean | Whether or not to include local (internal) calls. Default is 'false'. Note: only the outbound record is included for calls between endpoints, as the inbound record would be an exact replica. |  


```
GET https://pbx.sipcentric.com/api/v1/customers/25/calls?createdAfter=2014-03-10T13:30:00Z&pageSize=2&page=1
```

```response
HTTP/1.1 200 OK

{
  "totalItems": 23686,
  "pageSize": 1,
  "page": 1,
  "items": [
    {
      "type": "call",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/calls/7592317",
      "created" : "2014-03-10T13:37:00.000+0000",
      "callType": "domain",
      "direction": "IN",
      "from": "07557000000",
      "to": "07902000000",
      "callStarted": "2014-03-10T13:37:00.000+0000",
      "outcome": "no-answer",
      "duration": 0,
      "cost": 0,
      "callId": "ast01-1400142051.1562723",
      "linkedId": "ast01-1400142051.1562723",
      "links": {
        "recordings": "https://pbx.sipcentric.com/api/v1/customers/25/recordings?linkedId=ast01-1400142051.1562723"
      }
    }, {
      "type": "call",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/calls/7592432",
      "created" : "2014-03-10T13:47:00.000+0000",
      "callType": "domain",
      "direction": "OUT",
      "from": "07902000000",
      "to": "07557000000",
      "callStarted": "2014-03-10T13:47:00.000+0000",
      "outcome": "answered",
      "duration": 60,
      "cost": 0.09,
      "callId": "ast01-1401721105.2847099",
      "linkedId": "ast01-1401721105.2847099",
      "links": {
        "recordings": "https://pbx.sipcentric.com/api/v1/customers/25/recordings?linkedId=ast01-1401721105.2847099"
      }
    } ],
  "nextPage": "https://pbx.sipcentric.com/api/v1/customers/25/calls?pageSize=2&page=2"
}
```
 
##### Originate call

`POST /customers/{customerId}/calls`

To originate a new call, you should POST a new `call` representation containing the properties shown below, to the list resource.

Example request:

```
POST https://pbx.sipcentric.com/api/v1/customers/25/calls

{
  "type": "call",
  "endpoint": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/1234",
  "to": "07902000000"
}
```


```response
HTTP/1.1 200 OK
```

In the above example, a connection will first be established with the specified local endpoint ("endpoint"). We will then attempt to place a call to the remote destination ("to") and finally bridge the two together.

#### Sounds

| Resource Information           |                                                                        |  
| --------------------           | ---                                                                    |  
| Location                       | /customers/{customerId}/sounds                                                 |  
| Rate Limited?                  | Yes                                                                    |  
| Requests per rate limit window | 1200/hour                                                              |  
| Authentication                 | Basic Auth                                                             |  
| HTTP Method(s)                 | [GET](#get) <br> [POST](#post) <br> [DELETE](#delete) <br> [PUT](#put) |  
| JSON Representation(s)         | music <br> prompt                                                      |  
| Additional Formats             | `audio/wav`                                                            |  

The sounds sub-resource is a container for all sound files that have been added to an account. A sound file is in itself an abstract type and as such, each instance is represented by one of the following concrete sub-types.

##### Sound Types

###### Prompt

Represents a voice greeting or announcement and can be played, for example, on entry to a call queue or to give instructions about which keys to press in an IVR.

###### Music

Represents a music track which can be played when a caller is placed on hold or is waiting in a queue.

The properties of each sound type are listed below. Once a sound of a particular type has been created, its type cannot be changed.


| Type: *prompt*           |                                                                         |  
| -------------------      | -----------                                                             |  
| **Property**             | **Description**                                                         |  
| type <br> *required*     | "prompt" <br> *String*                                                  |  
| uri <br> *read-only*     | URI of this resource. <br> *String*                                     |  
| created <br> *read-only* | The time that the resource was created in ISO8601 format. <br> *String* |  
| name <br> *read-only*    | Name assigned to the prompt. <br> *String*                              |  
| size <br> *read-only*    | Size of the file in bytes. <br> *Integer*                               |  

| Type: *music*            |                                                                         |  
| -------------------      | -----------                                                             |  
| **Property**             | **Description**                                                         |  
| type <br> *required*     | "music" <br> *String*                                                   |  
| uri <br> *read-only*     | URI of this resource. <br> *String*                                     |  
| created <br> *read-only* | The time that the resource was created in ISO8601 format. <br> *String* |  
| name <br> *read-only*    | Name assigned to the music. <br> *String*                               |  
| size <br> *read-only*    | Size of the file in bytes. <br> *Integer*                               |  
| enabled <br> *read-only* | Whether or not the music is enabled and will play.  <br> *Boolean*      |  


##### List sounds

`GET /customers/{customerId}/sounds`

Returns all sounds, optionally filtered by the following query parameters:

| Query String Parameters | Type   | Description                                               |  
| ---                     | ---    | ---                                                       |  
| type                    | String | Include only a specific type of sound file (prompt/music) |  

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25/sounds?pageSize=2&page=1
```

```response
HTTP/1.1 200 OK

{
  "totalItems" : 6,
  "pageSize" : 1,
  "page" : 1,
  "items" : [ {
    "type" : "prompt",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/sounds/1035",
    "created" : "2014-03-10T13:37:00.0000+0000",
    "name" : "thank-you-for-calling",
    "size" : 129612
  }, {
    "type" : "prompt",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/5/sounds/1046",
    "created" : "2014-03-10T13:37:00.0000+0000",
    "name" : "calls-may-be-recorded",
    "size" : 69426
  } ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/25/sounds?pageSize=2&page=2"
}
```

##### Get sound

`GET /customers/{customerId}/sounds/{soundId}`

Returns the instance of a specific sound file.

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25/sounds/1035
```

```response
HTTP/1.1 200 OK

{
  "type" : "prompt",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/sounds/1035",
  "created" : "2014-03-10T13:37:00.0000+0000",
  "name" : "thank-you-for-calling",
  "size" : 129612
}
```

It is also possible to fetch a copy of the audio file itself, by including the `Accept` header:

`Accept: audio/wav`

See [Response Formats](#response-formats) for more information.


#### Recordings

| Resource Information           |                                    |  
| --------------------           | ---                                |  
| Location                       | /customers/{customerId}/recordings         |  
| Rate Limited?                  | Yes                                |  
| Requests per rate limit window | 1200/hour                          |  
| Authentication                 | Basic Auth                         |  
| HTTP Method(s)                 | [GET](#get) <br> [DELETE](#delete) |  
| JSON Representation(s)         | recording                          |  
| Additional Formats             | None                               |  

Fetch call recordings

| Type: *recording*          |                                                                                                                                                                 |  
| -------------------        | -----------                                                                                                                                                     |  
| **Property**               | **Description**                                                                                                                                                 |  
| type <br> *required*       | Describes the type of resource. <br> *String*                                                                                                                   |  
| uri <br> *read-only*       | URI of this resource. <br> *String*                                                                                                                             |  
| created <br> *read-only*   | The time that the resource was created in ISO8601 format. <br> *String*                                                                                         |  
| direction <br> *read-only* | Direction of call.  <br> *Enum: IN, OUT*                                                                                                                        |  
| partyId <br> *read-only*   | Username or phone number of the recorded party. <br> *String*                                                                                                   |  
| started <br> *read-only*   | The time that the recorded call began in ISO8601 format. <br> *String*                                                                                          |  
| size <br> *read-only*      | Size of the file in bytes. <br> *Integer*                                                                                                                       |  
| callId <br> *read-only*    | A unique ID for each leg of the call. <br> *String*                                                                                                             |  
| linkedId <br> *read-only*  | The unique ID of the call itself.  This ID is the same across all legs of a single call and can be used to link multiple legs of a call together. <br> *String* |  
| endpoint <br> *read-only*  | URI to the endpoint that was recording the call. If the call was internal only the outbound endpoint URI will be returned <br> *String*                         |  


##### List recordings

`GET /recordings`

| Query String Parameters | Type | Description |
| --- | --- | --- |
| createdAfter | String | Include only records created after the specified date/time (inclusive) |
| createdBefore | String | Include only records created before the specified date/time (inclusive) |
| startedAfter | String | Include only records started after the specified date/time (inclusive) |
| startedBefore | String | Include only records started before the specified date/time (inclusive) |
| callId | String | Include only recordings relating to a specific call ID |
| linkedId | String | Include only recordings relating to calls with the same linked ID |
| direction | String | Include only calls in a specific direction (in/out)
| includeLocal | String | Whether or not to include local calls. Note: only the outbound record is included for local calls, as the inbound record would be an exact replica (true/false) |

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25/recordings?pageSize=2&page=1
```

```response
HTTP/1.1 200 OK

{
  "totalItems" : 5788,
  "pageSize" : 2,
  "page" : 1,
  "items" : [ 
    {
      "type" : "recording",
      "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/recordings/1358371",
      "created" : "2014-03-10T13:42:00.0000+0000",
      "direction" : "IN",
      "partyId" : "106",
      "started" : "2014-03-10T13:37:00.0000+0000",
      "size" : 9615,
      "callId" : "ast01-1400082083.1542464",
      "linkedId" : "ast01-1400082083.1542464",
      "endpoint" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/2535"
    }, {
      "type" : "recording",
      "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/recordings/1358372",
      "created" : "2014-03-10T14:09:00.0000+0000",
      "direction" : "OUT",
      "partyId" : "07557000000",
      "started" : "2014-03-10T14:07:00.0000+0000",
      "size" : 97365,
      "callId" : "ast01-1401721105.2847099",
      "linkedId" : "ast01-1401721105.2847099",
      "endpoint" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/1928"
    } ,
  ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/25/recordings?pageSize=2&page=2"
}
```

##### Get recording

`GET /recordings`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25/recordings/{recordingId}
```

```response
HTTP/1.1 200 OK

{
  "type": "recording",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/recordings/1358371",
  "created" : "2014-03-10T13:37:00.000+0000",
  "direction": "IN",
  "partyId": "106",
  "started": "2014-05-14T15:41:25.000+0000",
  "size": 9615,
  "callId": "ast01-1400082083.1542464",
  "linkedId": "ast01-1400082083.1542464",
  "endpoint": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/2535"
}
```
#### Time Intervals

| Resource Information           |                                                                        |  
| --------------------           | ---                                                                    |  
| Location                       | /customers/{customerId}/timeintervals                                          |  
| Rate Limited?                  | Yes                                                                    |  
| Requests per rate limit window | 1200/hour                                                              |  
| Authentication                 | Basic Auth                                                             |  
| HTTP Method(s)                 | [GET](#get) <br> [POST](#post) <br> [DELETE](#delete) <br> [PUT](#put) |  
| JSON Representation(s)         | timeinterval                                                           |  
| Additional Formats             | None                                                                   |  

View time intervals on your account.


| Type: *timeinterval*     |                                                                              |  
| -------------------      | -----------                                                                  |  
| **Property**             | **Description**                                                              |  
| type <br> *required*     | Describes the type of resource - `timeinterval`. <br> *String*               |  
| uri <br> *read-only*     | The unique URI for this time interval. <br> *String*                         |  
| created <br> *read-only* | The time that the time interval was created in ISO8601 format. <br> *String* |  
| name <br> *required*     | Name assigned to the time interval. <br> *String*                            |  
| repeat <br> *required*   | When the time interval repeats. <br> *Enum: WEEKLY, YEARLY*                  |  
| includedTimes[] <br> *required* | See `includedTimes` object for further information on each parameter. <br> `{` <br> `"startTime" : "00:00",` <br> `"endTime" : "23:59",` <br> `"includeDays" : "MON-SUN",` <br> `"dayOfMonth" : 25,` <br> `"month" : "DEC"` <br> `}` <br> *Array* | 
| includedTimes[].dayOfWeek <br> *required*  | Days of week time interval is active. <br> *Enum: MON, TUE, WED, THU, FRI, SAT, SUN*                                                         |  
| includedTimes[].startTime <br> *required*  | Time interval start time (hh:mm format). <br> *String*                                                                                       |  
| includedTimes[].endTime <br> *required*    | Time interval end time (hh:mm format). <br> *String*                                                                                         |  
| includedTimes[].month <br> *optional*      | Numerical day of month time interval is active. Only valid when repeat is `YEARLY`. <br> *Enum: JAN, FEB, MAR, APR, MAY, JUN, JUL, AUG, SEP, OCT, NOV, DEC* |  
| includedTimes[].dayofMonth <br> *optional* | Month time interval is active. Only valid when repeat is `YEARLY`. <br> *Integer*                                                            |  

##### List time intervals

`GET /timeintervals`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25/timeintervals?pageSize=2&page=1
```

```response
HTTP/1.1 200 OK

{
  "totalItems" : 25,
  "pageSize" : 2,
  "page" : 1,
  "items" : [ {
    "type" : "timeinterval",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/31",
    "created" : "2014-03-10T13:37:00.000+0000",
    "name" : "Christmas",
    "repeat" : "YEARLY",
    "data" : [ {
      "startTime" : "00:00",
      "endTime" : "23:59",
      "includeDays" : "MON-SUN",
      "dayOfMonth" : 25,
      "month" : "DEC"
    } ]
  }, {
    "type" : "timeinterval",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/32",
    "created" : "2014-03-10T13:37:00.000+0000",
    "name" : "Support Out of Hours",
    "repeat" : "WEEKLY",
    "data" : [ {
      "startTime" : "17:00",
      "endTime" : "23:59",
      "includeDays" : "MON-FRI"
    }, {
      "startTime" : "00:00",
      "endTime" : "23:59",
      "includeDays" : "SAT-SUN"
    }, {
      "startTime" : "00:00",
      "endTime" : "07:59",
      "includeDays" : "MON-FRI"
    } ]
  } ]
}
```

##### Get time interval

`GET /timeintervals/{timeIntervalId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/31
```


```response
HTTP/1.1 200 OK

{
  "type": "timeinterval",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/31",
  "created" : "2014-03-10T13:37:00.000+0000",
  "name": "Always",
  "repeat": "WEEKLY",
  "data":  [
     {
      "startTime": "00:00",
      "endTime": "23:59",
      "includeDays": "MON-SUN"
    }
  ]
}
```

#### Endpoints

| Resource Information           |                                                                        |  
| --------------------           | ---                                                                    |  
| Location                       | /customers/{customerId}/endpoints                                              |  
| Rate Limited?                  | Yes                                                                    |  
| Requests per rate limit window | 1200/hour                                                              |  
| Authentication                 | Basic Auth                                                             |  
| HTTP Method(s)                 | [GET](#get) <br> [POST](#post) <br> [DELETE](#delete) <br> [PUT](#put) |  
| JSON Representation(s)         | phone <br> virtual <br> group <br> queue <br> ivr <br> mailbox         |  
| Additional Formats             | None                                                                   |  


Endpoints represent the internal destinations to which calls can be routed or from which calls can be made. An endpoint is itself an abstract type - each concrete sub-type, listed below, inherits a common set of properties including "name" and "shortNumber", whilst adding its own properties according to its functionality.

##### Endpoint Types

###### Phone Extension

For connecting a SIP handset, softphone or mobile app and to enable direct inbound/outbound calls over the Internet. Typically, each member of the team will have their own extension, but multiple devices may be connected to a single extension. Each phone extension includes an associated voicemail user and SIP identity and supports features such as call recording, call forwarding and call waiting. It can also be a member of one or more ring groups and/or call queues. *Note: call charges apply to forwarded calls.*

###### Virtual Extension

Used for linking an existing mobile or landline number to the system as if it were a regular extension, with its own 3-digit number for receiving incoming calls. A virtual extension can be a member of a group/queue in exactly the same way as a regular phone extension, but does not include any of the additional features (voicemail, recording etc). *Note: call charges apply to forwarded calls.*

###### Ring Group

Calls directed to a ring group will be forked to multiple phone/virtual extensions either in parallel, or cascaded from one to another in series. If one or more phones are busy the others will still ring.

###### Call Queue

On entry, callers may be greeted with a welcome message, then played music (or a custom marketing message) until their call is answered. Options include setting the ring strategy, maximum wait time and failover destination for calls exceeding this limit.

###### IVR (Menu)

Direct callers to the most appropriate person or department by giving them a number of options - e.g. "Press 1 for support, 2 for accounts" - or allow callers to reach individual extensions directly if they know the number.

###### Additional Mailbox

Although every phone extension has its own mailbox, sometimes additional mailboxes are required for things like out-of-hours messages or recorded information lines. Messages may be delivered via email or retrieved from any connected handset on the system, in the same way as any other mailbox.


The properties of each endpoint type are listed below. Once an endpoint of a particular type has been created, its type cannot be changed.

| Type: *phone*                     |                                                                          |  
| -------------                     | ---                                                                      |  
| **Property**                      | **Description**                                                          |  
| type <br> *required*              | Describes the type of resource *phone*. <br> *String*                    |  
| uri <br> *read-only*              | The unique URI for this extension. <br> *String*                         |  
| created <br> *read-only*          | The time that the extension was created in ISO8601 format. <br> *String* |  
| shortNumber <br> *required*       | 3 digit short number identifier for this extension. <br> *String*        |  
| name <br> *required*              | Name assigned to the extension. <br> *String*                            |  
| email <br> *read-only*            | Email address to send voicemails to. <br> *String*                       |  
| timeout <br> *read-only*          | Ring timeout for this extension. <br> *Integer*                          |  
| callWaiting <br> *read-only*      | Whether or not call waiting is enabled. <br> *Boolean*                   |  
| callRecording <br> *read-only*    | Whether call recordings are enabled. <br> *Enum: ALWAYS, OFF, ON_DEMAND* |  
| voicemailEnabled <br> *read-only* | Whether or not voicemail is enabled. <br> *Boolean*                      |  
| links[] <br> *read-only*          | Array of related resources. <br> *Array*                                 |  

| Type: *virtual*                   |                                                                                  |  
| -------------                     | ---                                                                              |  
| **Property**                      | **Description**                                                                  |  
| type <br> *required*              | Describes the type of resource *virtual*. <br> *String*                          |  
| uri <br> *read-only*              | The unique URI for this virtual extension. <br> *String*                         |  
| created <br> *read-only*          | The time that the virtual extension was created in ISO8601 format. <br> *String* |  
| shortNumber <br> *read-only*      | 3 digit short number identifier for this virtual extension. <br> *String*        |  
| name <br> *read-only*             | Name assigned to the virtual extension. <br> *String*                            |  
| destination <br> *read-only*      | Number to route calls to. <br> *String*                                          |  
| timeout <br> *read-only*          | Ring timeout for this virtual extension. <br> *Integer*                          |  
| screeningEnabled <br> *read-only* | Whether or not call screening is enabled.  <br> *Boolean*                        |  

| Type: *group*                        |                                                                      |  
| -------------                        | ---                                                                  |  
| **Property**                         | **Description**                                                      |  
| type <br> *required*                 | Describes the type of resource *group*. <br> *String*                |  
| uri <br> *read-only*                 | The unique URI for this group. <br> *String*                         |  
| created <br> *read-only*             | The time that the group was created in ISO8601 format. <br> *String* |  
| shortNumber <br> *read-only*         | 3 digit short number identifier for this group. <br> *String*        |  
| name <br> *read-only*                | Name assigned to the group. <br> *String*                            |  
| memberTimeout <br> *read-only*       | Ring timeout for each member of the group. <br> *Integer*            |  
| cascadeDelay <br> *read-only*        | Delay between ringing each member of the group. <br> *Integer*       |  
| failoverDestination <br> *read-only* | URI of endpoint to route calls to on timeout. <br> *String*          |  

| Type: *queue*                |                                                                           |  
| -------------                | ---                                                                       |  
| **Property**                 | **Description**                                                           |  
| type <br> *required*         | Describes the type of resource *queue*. <br> *String*                     |  
| uri <br> *read-only*         | The unique URI for this queue. <br> *String*                              |  
| created <br> *read-only*     | The time that the queue was created in ISO8601 format. <br> *String*      |  
| shortNumber <br> *read-only* | 3 digit short number identifier for this queue. <br> *String*             |  
| name <br> *read-only*        | Name assigned to the queue. <br> *String*                                 |  
| maxWait <br> *read-only*     | The maximum amount of time a caller can wait in the queue. <br> *Integer* |  

| Type: *ivr*                  |                                                                    |  
| -------------                | ---                                                                |  
| **Property**                 | **Description**                                                    |  
| type <br> *required*         | Describes the type of resource *ivr*. <br> *String*                |  
| uri <br> *read-only*         | The unique URI for this IVR. <br> *String*                         |  
| created <br> *read-only*     | The time that the IVR was created in ISO8601 format. <br> *String* |  
| shortNumber <br> *read-only* | 3 digit short number identifier for this IVR. <br> *String*        |  
| name <br> *read-only*        | Name assigned to the IVR. <br> *String*                            |  
| timeout <br> *read-only*     | Ring timeout for this IVR. <br> *Integer*                          |  

| Type: *mailbox*                |                                                                           |  
| -------------                  | ---                                                                       |  
| **Property**                   | **Description**                                                           |  
| type <br> *required*           | Describes the type of resource *mailbox*. <br> *String*                   |  
| uri <br> *read-only*           | The unique URI for this mailbox. <br> *String*                            |  
| created <br> *read-only*       | The time that the mailbox was created in ISO8601 format. <br> *String*    |  
| shortNumber <br> *read-only*   | 3 digit short number identifier for this mailbox. <br> *String*           |  
| name <br> *read-only*          | Name assigned to the mailbox. <br> *String*                               |  
| email <br> *read-only*         | Email address to send messages recorded in this mailbox to. <br> *String* |  
| links[] <br> *read-only*       | Array of related resources. <br> *Array*                                  |  


##### List endpoints

`GET /customers/{customerId}/endpoints`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25/endpoints?pageSize=2&page=1
```

```response
HTTP/1.1 200 OK

{
  "totalItems": 25,
  "pageSize": 1,
  "page": 1,
  "items":  [
     {
      "type": "ivr",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/101",
      "created" : "2014-03-10T13:37:00.000+0000",
      "shortNumber": "001",
      "name": "Main IVR",
      "timeout": 4
    },
    {
      "type": "ivr",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/102",
      "created" : "2014-03-10T13:37:00.000+0000",
      "shortNumber": "002",
      "name": "Out of Hours IVR",
      "timeout": 4
    }
  ],
  "nextPage": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints?pageSize=1&page=2"
}
```

##### Get endpoint

`GET /customers/{customerId}/endpoints/{endpointID}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25/endpoints/101
```

```response
HTTP/1.1 200 OK

{
  "type": "ivr",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/101",
  "created" : "2014-03-10T13:37:00.000+0000",
  "shortNumber": "001",
  "name": "Main IVR",
  "timeout": 0
}
```

#### Phone Numbers

| Resource Information           |                                                                        |  
| --------------------           | ---                                                                    |  
| Location                       | /customers/{customerId}/phonenumbers                                           |  
| Rate Limited?                  | Yes                                                                    |  
| Requests per rate limit window | 1200/hour                                                              |  
| Authentication                 | Basic Auth                                                             |  
| HTTP Method(s)                 | [GET](#get) <br> [POST](#post) <br> [DELETE](#delete) <br> [PUT](#put) |  
| JSON Representation(s)         | did                                                                    |  
| Additional Formats             | None                                                                   |  

View phone numbers on your account.

```exampleRepresentation
HTTP/1.1 200 OK

{
  "totalItems" : 15,
  "pageSize" : 2,
  "page" : 1,
  "items" : [ {
    "type" : "did",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/47",
    "created" : "2014-03-10T13:37:00.000+0000",
    "number" : "07557000000",
    "identifier" : "DID",
    "smsEnabled" : true,
    "smsAllowIncoming" : true,
    "smsNotificationEmail" : "contact@fredbloggs.com",
    "smsNotificationUrl" : "https://www.fredbloggs.com",
    "faxEnabled" : false
  }, {
    "type" : "did",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/50",
    "created" : "2014-03-10T13:37:00.000+0000",
    "number" : "01212854400",
    "identifier" : "",
    "destination" : "https://pbx.sipcentric.com/api/v1/customers/5/endpoints/101",
    "smsEnabled" : true,
    "smsAllowIncoming" : true,
    "smsNotificationEmail" : "support@sipcentric.com",
    "faxEnabled" : false,
    "routingRules" : [ {
      "timeInterval" : "https://pbx.sipcentric.com/api/v1/customers/5/timeintervals/594",
      "destination" : "https://pbx.sipcentric.com/api/v1/customers/5/endpoints/102"
    }, {
      "timeInterval" : "https://pbx.sipcentric.com/api/v1/customers/5/timeintervals/625",
      "destination" : "https://pbx.sipcentric.com/api/v1/customers/5/endpoints/102"
    }, {
      "timeInterval" : "https://pbx.sipcentric.com/api/v1/customers/5/timeintervals/704",
      "destination" : "https://pbx.sipcentric.com/api/v1/customers/5/endpoints/102"
    } ]
  } ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers?pageSize=2&page=2"
}
```

| Type: *did*                                 |                                                                                            |  
| -----------                                 | -----------                                                                                |  
| **Property**                                | **Description**                                                                            |  
| type <br> *required*                        | Describes the type of resource. <br> *String*                                              |  
| uri <br> *required*                         | The unique URI for this number. <br> *String*                                              |  
| created <br> *required*                     | The time that the number was created in ISO8601 format. <br> *String*                      |  
| number <br> *required*                      | The public number for this did. <br> *String*                                              |  
| identifier <br> *required*                  | The caller id that will be displayed for this number, blank for 'anonymous'. <br> *String* |  
| destination <br> *required*                 | The URI of the endpoint that this number will route calls to. <br> *String*                |  
| smsEnabled <br> *required*                  | Whether SMS messages can be sent from this number. <br> *Boolean*                          |  
| smsAllowIncoming <br> *required*            | Whether SMS messages can be sent to this number. <br> *Boolean*                            |  
| smsNotificationEmail <br> *required*        | The email address to send incoming SMS notifications to. <br> *String*                     |  
| faxEnabled <br> *required*                  | Whether this number can receive faxes. <br> *Boolean*                                      |  
| routingRules[] <br> *required*              | Routing rules that apply to this number. <br> *Array*                                      |  
| routingRules[].timeInterval <br> *required* | URI of active timeInterval on number. <br> *String*                                        |  
| routingRules[].destination <br> *required*  | URI of endpoint that the active time intervals forward to. <br> *String*                   |  


##### List phone numbers

`GET /phonenumbers`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers?pageSize=2&page=1
```

```response
HTTP/1.1 200 OK

{
  "totalItems" : 15,
  "pageSize" : 2,
  "page" : 1,
  "items" : [ {
    "type" : "did",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/47",
    "created" : "2014-03-10T13:37:00.000+0000",
    "number" : "07557000000",
    "identifier" : "DID",
    "smsEnabled" : true,
    "smsAllowIncoming" : true,
    "smsNotificationEmail" : "contact@fredbloggs.com",
    "smsNotificationUrl" : "https://www.fredbloggs.com",
    "faxEnabled" : false
  }, {
    "type" : "did",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/50",
    "created" : "2014-03-10T13:37:00.000+0000",
    "number" : "01212854400",
    "identifier" : "",
    "destination" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/101",
    "smsEnabled" : true,
    "smsAllowIncoming" : true,
    "smsNotificationEmail" : "support@sipcentric.com",
    "faxEnabled" : false,
    "routingRules" : [ {
      "timeInterval" : "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/594",
      "destination" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/102"
    }, {
      "timeInterval" : "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/625",
      "destination" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/102"
    }, {
      "timeInterval" : "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/704",
      "destination" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/102"
    } ]
  } ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers?pageSize=2&page=2"
}
```

##### Get phone number

`GET /phonenumbers/{numberId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/47
```

```response
HTTP/1.1 200 OK

{
  "type": "did",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/47",
  "created" : "2014-03-10T13:37:00.000+0000",
  "number": "01212854747",
  "identifier": "DID",
  "destination": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/94",
  "smsEnabled": true
}
```

#### Outgoing Caller IDs

| Resource Information           |                                                                        |  
| --------------------           | ---                                                                    |  
| Location                       | /customers/{customerId}/outgoingcallerids                                      |  
| Rate Limited?                  | Yes                                                                    |  
| Requests per rate limit window | 1200/hour                                                              |  
| Authentication                 | Basic Auth                                                             |  
| HTTP Method(s)                 | [GET](#get) <br> [POST](#post) <br> [DELETE](#delete) <br> [PUT](#put) |  
| JSON Representation(s)         | outgoingcallerid                                                       |  
| Additional Formats             | None                                                                   |  

View outgoing caller ids on your account.

```exampleRepresentation
HTTP/1.1 200 OK

{
  "totalItems": 1,
  "pageSize": 1,
  "page": 1,
  "items":  [
     {
      "type": "outgoingcallerid",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids/114",
      "created" : "2014-03-10T13:37:00.000+0000",
      "number": "Sipcentric",
      "allowCalls": false,
      "allowSms": true
    },
    {
      "type": "outgoingcallerid",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids/115",
      "created" : "2014-03-10T13:37:00.000+0000",
      "number": "01212854400",
      "allowCalls": false,
      "allowSms": true
    }
  ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerid?pageSize=2&page=2"
}
```

| Type: *outgoingcallerid*   |                                                                                   |  
| --------------             | -----------                                                                       |  
| **Property**               | **Description**                                                                   |  
| type <br> *required*       | Describes the type of resource (`outgoingcallerid`). <br> *String*                |  
| uri <br> *required*        | The unique URI for this outgoing caller id. <br> *String*                         |  
| created <br> *required*    | The time that the outgoing caller id was created in ISO8601 format. <br> *String* |  
| number <br> *required*     | Name or number of outgoing caller id. <br> *String*                               |  
| allowCalls <br> *required* | Whether calls can be made to this number. <br> *Boolean*                          |  
| allowSms <br> *required*   | Whether sms messages can be sent to this number. <br> *Boolean*                   |  


##### List outgoing caller ids

`GET /outgoingcallerids`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids?pageSize=2&page=1
```

```response
HTTP/1.1 200 OK

{
  "totalItems": 1,
  "pageSize": 1,
  "page": 1,
  "items":  [
     {
      "type": "outgoingcallerid",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids/114",
      "created" : "2014-03-10T13:37:00.000+0000",
      "number": "Sipcentric",
      "allowCalls": false,
      "allowSms": true
    },
    {
      "type": "outgoingcallerid",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids/115",
      "created" : "2014-03-10T13:37:00.000+0000",
      "number": "01212854400",
      "allowCalls": false,
      "allowSms": true
    }
  ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerid?pageSize=2&page=2"
}
```

##### Get outgoing caller id

`GET /outgoingcallerid/{numberId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerid/115
```

```response
HTTP/1.1 200 OK

{
  "type": "outgoingcallerid",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids/115",
  "created" : "2014-03-10T13:37:00.000+0000",
  "number": "01212854400",
  "allowCalls": false,
  "allowSms": true
}
```

#### Credit Status

| Resource Information           |                              |  
| --------------------           | ---                          |  
| Location                       | /customers/{customerId}/creditstatus |  
| Rate Limited?                  | Yes                          |  
| Requests per rate limit window | 1200/hour                    |  
| Authentication                 | Basic Auth                   |  
| HTTP Method(s)                 | [GET](#get)                  |  
| JSON Representation(s)         | creditstatus                 |  
| Additional Formats             | None                         |  

View customers and remaining calling credit.

```exampleRepresentation
HTTP/1.1 200 OK

{
  "type": "creditstatus",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/creditstatus",
  "accountType": "postpaid",
  "creditRemaining": 191.571
}
```

| Type: *creditstatus*        |                                                                        |  
| --------------              | -----------                                                            |  
| **Property**                | **Description**                                                        |  
| type <br> *required*        | Describes the type of resource *creditstatus*. <br> *String*           |  
| uri <br> *read-only*        | The unique URI for this representation of credit status. <br> *String* |  
| accountType <br> *required* | The type of account. <br> *Enum: PREPAID, POSTPAID*                    |  
| balance <br> *read-only*    | Balance on the account <br> *Float*                                    |  

##### Get credit status

`GET /creditstatus`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/25/creditstatus
```

```response
HTTP/1.1 200 OK

{
  "type": "creditstatus",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/creditstatus",
  "accountType": "postpaid",
  "balance": -2.781
}
```
 
#### Call Bundles

| Resource Information           |                                                                        |  
| --------------------           | ---                                                                    |  
| Location                       | /customers/{customerId}/callbundles                                            |  
| Rate Limited?                  | Yes                                                                    |  
| Requests per rate limit window | 1200/hour                                                              |  
| Authentication                 | Basic Auth                                                             |  
| HTTP Method(s)                 | [GET](#get) <br> [POST](#post) <br> [DELETE](#delete) <br> [PUT](#put) |  
| JSON Representation(s)         | customerbundle                                                         |  
| Additional Formats             | None                                                                   |  

View call bundles on your account.

```exampleRepresentation
HTTP/1.1 200 OK

{
  "totalItems": 20,
  "pageSize": 1,
  "page": 1,
  "items":  [
     {
      type: "customerbundle",
      uri: "https://pbx.sipcentric.com/api/v1/customers/25/callbundles/1040",
      created: "2014-03-01T00:00:00.000+0000",
      name: "1000 Mins - Local/National (Free)",
      inclusiveMins: 1000,
      priceMonthly: 5,
      validFrom: "2014-03-01T00:00:00.000+0000",
      validTo: "2014-03-31T23:59:59.999+0000",
      usedMins: 57,
      availableMins: 943,
      autoRenew: true,
      status: "ACTIVE"
    }
  ]
}
```

| Type: *customerbundle*        |                                                                       |  
| --------------                | -----------                                                           |  
| **Property**                  | **Description**                                                       |  
| type <br> *required*          | Describes the type of resource *customerbundle*. <br> *String*        |  
| uri <br> *required*           | The unique URI for this bundle. <br> *String*                         |  
| created <br> *required*       | The time that the bundle was created in ISO8601 format. <br> *String* |  
| name <br> *required*          | Bundle name. <br> *String*                                            |  
| inclusiveMins <br> *required* | Total number of minutes in the bundle. <br> *Integer*                 |  
| priceMonthly <br> *required*  | Monthly cost in GBP (£). <br> *Integer*                               |  
| validFrom <br> *required*     | Bundle start time in ISO8601 format. <br> *String*                    |  
| validTo <br> *required*       | Bundle expiry time in ISO8601 format. <br> *String*                   |  
| usedMins <br> *required*      | Bundle minutes remaining. <br> *Integer*                              |  
| availableMins <br> *required* | Bundle minutes used. <br> *Integer*                                   |  
| autoRenew <br> *required*     | Whether the bundle set to automatically renew. <br> *Boolean*         |  
| status <br> *required*        | Returns either. <br> *Enum: ACTIVE, EXPIRED*                          |  

##### List call bundles

`GET /callbundles`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/callbundles?pageSize=1&page=1
```

```response
HTTP/1.1 200 OK

{
  "totalItems": 20,
  "pageSize": 1,
  "page": 1,
  "items":  [
     {
      type: "customerbundle",
      uri: "https://pbx.sipcentric.com/api/v1/customers/25/callbundles/1040",
      created: "2014-03-01T00:00:00.000+0000",
      name: "1000 Mins - Local/National (Free)",
      inclusiveMins: 1000,
      priceMonthly: 5,
      validFrom: "2014-03-01T00:00:00.000+0000",
      validTo: "2014-03-31T23:59:59.999+0000",
      usedMins: 57,
      availableMins: 943,
      autoRenew: true,
      status: "ACTIVE"
    }
  ]
}
```

##### Get call bundle

`GET /callbundles/{numberId}`

Example request:

```
GET https://pbx.sipcentric.com/api/v1/callbundles/1040
```

```response
HTTP/1.1 200 OK

{
  "type": "customerbundle",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/callbundles/1040",
  "created": "2014-03-01T00:00:00.000+0000",
  "name": "1000 Mins - Local/National (Free)",
  "inclusiveMins": 1000,
  "priceMonthly": 5,
  "validFrom": "2014-03-01T00:00:00.000+0000",
  "validTo": "2014-03-31T23:59:59.999+0000",
  "usedMins": 57,
  "availableMins": 943,
  "autoRenew": true,
  "status": "ACTIVE"
}
```


#### SIP Identities

##### Registrations

#### Voicemail Users




## Global Resources

#### Token Generator

In some situations it's not possible to use basic authentication in a GET request, such as downloading a call recording in a client's browser.

To solve this issue we have added a token generator for pre authenticating these requests. This will return a single-use token for accessing any readonly resources 
you would normally have to authenticate for.

##### Get token

```
GET https://pbx.sipcentric.com/api/v1/tokengenerator

{
  "type": "authtoken",
  "id": "318f9a6d-162e-4d46-89d2-3d7cb2f4db16",
  "created": "2014-07-11T15:11:12.477+0000",
  "expires": "2014-07-11T16:11:12.477+0000"
}
```

You can now use this token to get a call recording using the `tokenid` parameter in the GET request:

```http
https://pbx.sipcentric.com/api/v1/customers/25/recordings/242348.wav?tokenid=318f9a6d-162e-4d46-89d2-3d7cb2f4db16
```

Anyone that tried to use the request again will get a 401 Unauthorized. This prevents replay attacks from getting any data.

#### Stream

You can create a standing HTTP connection to our API for live streaming data. This means you can process events in near real time, without having to poll other resources and potentially hit request limits. Currently the following is available via the streaming API:

- Incoming call notifications
- Received SMS messages

Data is returned as JSON objects.

Example:

```
{NEEDS_EXAMPLE}
```

